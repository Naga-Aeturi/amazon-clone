[debug] [2023-07-30T23:33:41.979Z] ----------------------------------------------------------------------
[debug] [2023-07-30T23:33:41.984Z] Command:       /home/aeturi/.nvm/versions/node/v18.17.0/bin/node /usr/local/bin/firebase emulators:start
[debug] [2023-07-30T23:33:41.985Z] CLI Version:   12.4.6
[debug] [2023-07-30T23:33:41.986Z] Platform:      linux
[debug] [2023-07-30T23:33:41.986Z] Node Version:  v18.17.0
[debug] [2023-07-30T23:33:41.987Z] Time:          Mon Jul 31 2023 05:03:41 GMT+0530 (India Standard Time)
[debug] [2023-07-30T23:33:41.987Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-07-30T23:33:42.234Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-07-30T23:33:42.235Z] > authorizing via signed-in user (aeturipradeep@gmail.com)
[info] i  emulators: Starting emulators: functions, hosting {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions, hosting"}}
[debug] [2023-07-30T23:33:42.251Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-07-30T23:33:42.251Z] [hosting] Hosting Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-07-30T23:33:42.253Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"hosting":[{"address":"127.0.0.1","family":"IPv4","port":5000}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2023-07-30T23:33:42.281Z] [hub] writing locator at /tmp/hub-clone-96e62.json
[debug] [2023-07-30T23:33:42.306Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-07-30T23:33:42.306Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-07-30T23:33:42.306Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"hosting":[{"address":"127.0.0.1","family":"IPv4","port":5000}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] ⚠  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: auth, firestore, database, pubsub, storage {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mauth, firestore, database, pubsub, storage\u001b[22m"}}
[debug] [2023-07-30T23:33:42.311Z] defaultcredentials: writing to file /home/aeturi/.config/firebase/aeturipradeep_gmail_com_application_default_credentials.json
[debug] [2023-07-30T23:33:42.315Z] Setting GAC to /home/aeturi/.config/firebase/aeturipradeep_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /home/aeturi/.config/firebase/aeturipradeep_gmail_com_application_default_credentials.json"}}
[debug] [2023-07-30T23:33:42.318Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/clone-96e62/adminSdkConfig [none]
[debug] [2023-07-30T23:33:43.907Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/clone-96e62/adminSdkConfig 200
[debug] [2023-07-30T23:33:43.908Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/clone-96e62/adminSdkConfig {"projectId":"clone-96e62","storageBucket":"clone-96e62.appspot.com"}
[debug] [2023-07-30T23:33:43.947Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/clone-96e62/sites 
[debug] [2023-07-30T23:33:46.553Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/clone-96e62/sites 200
[debug] [2023-07-30T23:33:46.554Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/clone-96e62/sites {"sites":[{"name":"projects/clone-96e62/sites/clone-96e62","defaultUrl":"https://clone-96e62.web.app","appId":"1:58093445337:web:1014c0f584fa145c4edec8","type":"DEFAULT_SITE"}]}
[debug] [2023-07-30T23:33:46.554Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/clone-96e62/webApps/1:58093445337:web:1014c0f584fa145c4edec8/config [none]
[debug] [2023-07-30T23:33:48.603Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/clone-96e62/webApps/1:58093445337:web:1014c0f584fa145c4edec8/config 200
[debug] [2023-07-30T23:33:48.604Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/clone-96e62/webApps/1:58093445337:web:1014c0f584fa145c4edec8/config {"projectId":"clone-96e62","appId":"1:58093445337:web:1014c0f584fa145c4edec8","storageBucket":"clone-96e62.appspot.com","apiKey":"AIzaSyAJ8-ASR5SfX91NsFJ5WQT5tOhJl43iiyU","authDomain":"clone-96e62.firebaseapp.com","messagingSenderId":"58093445337","measurementId":"G-CSTDZTFPXM"}
[debug] [2023-07-30T23:33:48.665Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/clone-96e62 [none]
[debug] [2023-07-30T23:33:49.831Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/clone-96e62 200
[debug] [2023-07-30T23:33:49.831Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/clone-96e62 {"projectId":"clone-96e62","projectNumber":"58093445337","displayName":"amazon-clone","name":"projects/clone-96e62","resources":{"hostingSite":"clone-96e62"},"state":"ACTIVE","etag":"1_febc3e64-604d-42ca-b2e2-addf2ac12261"}
[info] i  hosting[clone-96e62]: Serving hosting files from: build {"metadata":{"emulator":{"name":"hosting"},"message":"Serving hosting files from: \u001b[1mbuild\u001b[22m"}}
[info] ✔  hosting[clone-96e62]: Local server: http://127.0.0.1:5000 {"metadata":{"emulator":{"name":"hosting"},"message":"Local server: \u001b[4m\u001b[1mhttp://127.0.0.1:5000\u001b[22m\u001b[24m"}}
[debug] [2023-07-30T23:33:49.859Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2023-07-30T23:33:49.860Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2023-07-30T23:33:49.860Z] Starting Emulator UI with command {"binary":"node","args":["/home/aeturi/.cache/firebase/emulators/ui-v1.11.7/server/server.js"],"optionalArgs":[],"joinArgs":false} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"/home/aeturi/.cache/firebase/emulators/ui-v1.11.7/server/server.js\"],\"optionalArgs\":[],\"joinArgs\":false}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2023-07-30T23:33:50.055Z] Web / API server started at 127.0.0.1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at 127.0.0.1:4000\n"}}
[debug] [2023-07-30T23:33:50.056Z] Web / API server started at ::1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at ::1:4000\n"}}
[info] i  functions: Watching "/home/aeturi/amazon-clone/functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/home/aeturi/amazon-clone/functions\" for Cloud Functions..."}}
[debug] [2023-07-30T23:33:50.158Z] Validating nodejs source
[debug] [2023-07-30T23:33:53.176Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "stripe": "^7.4.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2023-07-30T23:33:53.177Z] Building nodejs source
[debug] [2023-07-30T23:33:53.177Z] Failed to find version of module node: reached end of search path /home/aeturi/amazon-clone/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-07-30T23:33:53.182Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-07-30T23:33:53.187Z] Found firebase-functions binary at '/home/aeturi/amazon-clone/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8054

[debug] [2023-07-30T23:33:53.809Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[info] ✔  functions[us-central1-api]: http function initialized (http://127.0.0.1:5001/clone-96e62/us-central1/api). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/clone-96e62/us-central1/api)."}}
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌───────────┬────────────────┬─────────────────────────────────┐
│ Emulator  │ Host:Port      │ View in Emulator UI             │
├───────────┼────────────────┼─────────────────────────────────┤
│ Functions │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions │
├───────────┼────────────────┼─────────────────────────────────┤
│ Hosting   │ 127.0.0.1:5000 │ n/a                             │
└───────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2023-07-30T23:34:10.661Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:34:10.661Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:34:10.663Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:34:10.661Z"],"workRunningCount":1}
[debug] [2023-07-30T23:34:10.664Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2023-07-30T23:34:10.672Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:34:10.673Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2023-07-30T23:34:10.695Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:34:10.698Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-07-30T23:34:10.710Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:34:10.710Z"],"queueLength":1,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:34:10.661Z"],"workRunningCount":1}
[debug] [2023-07-30T23:34:10.711Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:34:10.661Z","/clone-96e62/us-central1/api/payments/create-2023-07-30T23:34:10.710Z"],"workRunningCount":2}
[debug] [2023-07-30T23:34:10.711Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2023-07-30T23:34:10.717Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:34:10.718Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2023-07-30T23:34:10.736Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:34:10.737Z] [worker-pool] Adding worker with key us-central1-api, total=2 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=2"}}
[debug] [2023-07-30T23:34:12.396Z] [runtime-status] [47174] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47174] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:34:12.400Z] [runtime-status] [47174] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47174] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:34:12.400Z] [runtime-status] [47174] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47174] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:34:12.400Z] [runtime-status] [47174] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47174] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:34:12.449Z] [runtime-status] [47180] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47180] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:34:12.451Z] [runtime-status] [47180] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47180] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:34:12.452Z] [runtime-status] [47180] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47180] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:34:12.453Z] [runtime-status] [47180] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47180] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:34:12.704Z] [runtime-status] [47174] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47174] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:34:12.705Z] [runtime-status] [47174] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47174] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:34:12.707Z] [runtime-status] [47174] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47174] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:34:12.708Z] [runtime-status] [47174] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47174] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:34:12.711Z] [runtime-status] [47174] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47174] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:34:12.711Z] [runtime-status] [47174] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47174] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:34:12.762Z] [runtime-status] [47180] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47180] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:34:12.762Z] [runtime-status] [47180] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47180] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:34:12.763Z] [runtime-status] [47180] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47180] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:34:12.765Z] [runtime-status] [47180] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47180] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:34:12.768Z] [runtime-status] [47180] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47180] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:34:12.768Z] [runtime-status] [47180] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47180] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:34:12.880Z] [runtime-status] [47174] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47174] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:34:12.880Z] [runtime-status] [47174] Listening to port: /tmp/fire_emu_d1908e146d2d98fb.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47174] Listening to port: /tmp/fire_emu_d1908e146d2d98fb.sock"}}
[debug] [2023-07-30T23:34:12.929Z] [runtime-status] [47180] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47180] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:34:12.930Z] [runtime-status] [47180] Listening to port: /tmp/fire_emu_f6f6a682135a7713.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47180] Listening to port: /tmp/fire_emu_f6f6a682135a7713.sock"}}
[debug] [2023-07-30T23:34:12.937Z] [worker-us-central1-api-7c6a784b-7b9d-4b6b-962b-f783d83185a4]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7c6a784b-7b9d-4b6b-962b-f783d83185a4]: IDLE"}}
[debug] [2023-07-30T23:34:12.938Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:34:12.939Z] [worker-us-central1-api-7c6a784b-7b9d-4b6b-962b-f783d83185a4]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7c6a784b-7b9d-4b6b-962b-f783d83185a4]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[info] >  /home/aeturi/amazon-clone/functions/index.js:15 {"user":"/home/aeturi/amazon-clone/functions/index.js:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /home/aeturi/amazon-clone/functions/index.js:15"}}
[info] >      const paymentIntent = await stripe.paymentIntent.create({ {"user":"    const paymentIntent = await stripe.paymentIntent.create({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     const paymentIntent = await stripe.paymentIntent.create({"}}
[info] >                                                       ^ {"user":"                                                     ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                                                      ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: Cannot read properties of undefined (reading 'create') {"user":"TypeError: Cannot read properties of undefined (reading 'create')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: Cannot read properties of undefined (reading 'create')"}}
[info] >      at /home/aeturi/amazon-clone/functions/index.js:15:54 {"user":"    at /home/aeturi/amazon-clone/functions/index.js:15:54","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/index.js:15:54"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)"}}
[info] >      at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3) {"user":"    at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15 {"user":"    at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15"}}
[info] >      at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12) {"user":"    at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)"}}
[info] >      at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7) {"user":"    at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:34:12.976Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:34:10.710Z"],"workRunningCount":1}
[debug] [2023-07-30T23:34:12.978Z] [worker-us-central1-api-7c6a784b-7b9d-4b6b-962b-f783d83185a4]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7c6a784b-7b9d-4b6b-962b-f783d83185a4]: exited"}}
[debug] [2023-07-30T23:34:12.979Z] [worker-us-central1-api-7c6a784b-7b9d-4b6b-962b-f783d83185a4]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7c6a784b-7b9d-4b6b-962b-f783d83185a4]: FINISHED"}}
[debug] [2023-07-30T23:34:12.984Z] [worker-us-central1-api-bb991fa6-fef5-484e-bda7-9e05f9c240c2]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-bb991fa6-fef5-484e-bda7-9e05f9c240c2]: IDLE"}}
[debug] [2023-07-30T23:34:12.985Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[debug] [2023-07-30T23:34:12.985Z] [worker-pool] Cleaned up workers for us-central1-api: 2 --> 1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 2 --> 1"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:34:12.986Z] [worker-us-central1-api-bb991fa6-fef5-484e-bda7-9e05f9c240c2]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-bb991fa6-fef5-484e-bda7-9e05f9c240c2]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[info] >  /home/aeturi/amazon-clone/functions/index.js:15 {"user":"/home/aeturi/amazon-clone/functions/index.js:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /home/aeturi/amazon-clone/functions/index.js:15"}}
[info] >      const paymentIntent = await stripe.paymentIntent.create({ {"user":"    const paymentIntent = await stripe.paymentIntent.create({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     const paymentIntent = await stripe.paymentIntent.create({"}}
[info] >                                                       ^ {"user":"                                                     ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                                                      ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: Cannot read properties of undefined (reading 'create') {"user":"TypeError: Cannot read properties of undefined (reading 'create')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: Cannot read properties of undefined (reading 'create')"}}
[info] >      at /home/aeturi/amazon-clone/functions/index.js:15:54 {"user":"    at /home/aeturi/amazon-clone/functions/index.js:15:54","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/index.js:15:54"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)"}}
[info] >      at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3) {"user":"    at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15 {"user":"    at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15"}}
[info] >      at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12) {"user":"    at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)"}}
[info] >      at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7) {"user":"    at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:34:13.032Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:34:13.034Z] [worker-us-central1-api-bb991fa6-fef5-484e-bda7-9e05f9c240c2]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-bb991fa6-fef5-484e-bda7-9e05f9c240c2]: exited"}}
[debug] [2023-07-30T23:34:13.034Z] [worker-us-central1-api-bb991fa6-fef5-484e-bda7-9e05f9c240c2]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-bb991fa6-fef5-484e-bda7-9e05f9c240c2]: FINISHED"}}
[debug] [2023-07-30T23:34:20.934Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:34:20.934Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:34:20.934Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:34:20.934Z"],"workRunningCount":1}
[debug] [2023-07-30T23:34:20.935Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=11.96 --> us-central1-api
[debug] [2023-07-30T23:34:20.938Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:34:20.939Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=11.96, mapping to path=/payments/create?total=11.96 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=11.96, mapping to path=/payments/create?total=11.96"}}
[debug] [2023-07-30T23:34:20.939Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-07-30T23:34:20.953Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:34:20.954Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-07-30T23:34:20.961Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:34:20.961Z"],"queueLength":1,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:34:20.934Z"],"workRunningCount":1}
[debug] [2023-07-30T23:34:20.961Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:34:20.934Z","/clone-96e62/us-central1/api/payments/create-2023-07-30T23:34:20.961Z"],"workRunningCount":2}
[debug] [2023-07-30T23:34:20.962Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=11.96 --> us-central1-api
[debug] [2023-07-30T23:34:20.967Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:34:20.968Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=11.96, mapping to path=/payments/create?total=11.96 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=11.96, mapping to path=/payments/create?total=11.96"}}
[debug] [2023-07-30T23:34:20.983Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:34:20.984Z] [worker-pool] Adding worker with key us-central1-api, total=2 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=2"}}
[debug] [2023-07-30T23:34:22.415Z] [runtime-status] [47232] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47232] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:34:22.418Z] [runtime-status] [47232] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47232] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:34:22.419Z] [runtime-status] [47226] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47226] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:34:22.420Z] [runtime-status] [47232] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47232] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:34:22.421Z] [runtime-status] [47232] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47232] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:34:22.423Z] [runtime-status] [47226] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47226] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:34:22.424Z] [runtime-status] [47226] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47226] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:34:22.426Z] [runtime-status] [47226] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47226] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:34:22.714Z] [runtime-status] [47232] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47232] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:34:22.714Z] [runtime-status] [47232] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47232] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:34:22.715Z] [runtime-status] [47232] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47232] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:34:22.717Z] [runtime-status] [47232] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47232] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:34:22.718Z] [runtime-status] [47226] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47226] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:34:22.718Z] [runtime-status] [47226] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47226] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:34:22.719Z] [runtime-status] [47226] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47226] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:34:22.720Z] [runtime-status] [47232] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47232] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:34:22.721Z] [runtime-status] [47232] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47232] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:34:22.722Z] [runtime-status] [47226] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47226] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:34:22.723Z] [runtime-status] [47226] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47226] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:34:22.724Z] [runtime-status] [47226] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47226] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:34:22.873Z] [runtime-status] [47232] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47232] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:34:22.874Z] [runtime-status] [47232] Listening to port: /tmp/fire_emu_54a3be9b14aaae01.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47232] Listening to port: /tmp/fire_emu_54a3be9b14aaae01.sock"}}
[debug] [2023-07-30T23:34:22.881Z] [runtime-status] [47226] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47226] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:34:22.882Z] [runtime-status] [47226] Listening to port: /tmp/fire_emu_4605ae176f5de736.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47226] Listening to port: /tmp/fire_emu_4605ae176f5de736.sock"}}
[debug] [2023-07-30T23:34:22.915Z] [worker-us-central1-api-2736c16f-b9da-4b1f-a4c3-4bb4541d4f3b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2736c16f-b9da-4b1f-a4c3-4bb4541d4f3b]: IDLE"}}
[debug] [2023-07-30T23:34:22.916Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:34:22.916Z] [worker-us-central1-api-2736c16f-b9da-4b1f-a4c3-4bb4541d4f3b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2736c16f-b9da-4b1f-a4c3-4bb4541d4f3b]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[info] >  /home/aeturi/amazon-clone/functions/index.js:15 {"user":"/home/aeturi/amazon-clone/functions/index.js:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /home/aeturi/amazon-clone/functions/index.js:15"}}
[info] >      const paymentIntent = await stripe.paymentIntent.create({ {"user":"    const paymentIntent = await stripe.paymentIntent.create({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     const paymentIntent = await stripe.paymentIntent.create({"}}
[info] >                                                       ^ {"user":"                                                     ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                                                      ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: Cannot read properties of undefined (reading 'create') {"user":"TypeError: Cannot read properties of undefined (reading 'create')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: Cannot read properties of undefined (reading 'create')"}}
[info] >      at /home/aeturi/amazon-clone/functions/index.js:15:54 {"user":"    at /home/aeturi/amazon-clone/functions/index.js:15:54","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/index.js:15:54"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)"}}
[info] >      at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3) {"user":"    at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15 {"user":"    at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15"}}
[info] >      at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12) {"user":"    at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)"}}
[info] >      at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7) {"user":"    at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:34:22.950Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:34:20.934Z"],"workRunningCount":1}
[debug] [2023-07-30T23:34:22.954Z] [worker-us-central1-api-2736c16f-b9da-4b1f-a4c3-4bb4541d4f3b]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2736c16f-b9da-4b1f-a4c3-4bb4541d4f3b]: exited"}}
[debug] [2023-07-30T23:34:22.954Z] [worker-us-central1-api-2736c16f-b9da-4b1f-a4c3-4bb4541d4f3b]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2736c16f-b9da-4b1f-a4c3-4bb4541d4f3b]: FINISHED"}}
[debug] [2023-07-30T23:34:22.995Z] [worker-us-central1-api-6ca624ae-c0aa-42d9-b092-3aa68c3905ce]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6ca624ae-c0aa-42d9-b092-3aa68c3905ce]: IDLE"}}
[debug] [2023-07-30T23:34:22.996Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[debug] [2023-07-30T23:34:22.996Z] [worker-pool] Cleaned up workers for us-central1-api: 2 --> 1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 2 --> 1"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:34:22.997Z] [worker-us-central1-api-6ca624ae-c0aa-42d9-b092-3aa68c3905ce]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6ca624ae-c0aa-42d9-b092-3aa68c3905ce]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[info] >  /home/aeturi/amazon-clone/functions/index.js:15 {"user":"/home/aeturi/amazon-clone/functions/index.js:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /home/aeturi/amazon-clone/functions/index.js:15"}}
[info] >      const paymentIntent = await stripe.paymentIntent.create({ {"user":"    const paymentIntent = await stripe.paymentIntent.create({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     const paymentIntent = await stripe.paymentIntent.create({"}}
[info] >                                                       ^ {"user":"                                                     ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                                                      ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: Cannot read properties of undefined (reading 'create') {"user":"TypeError: Cannot read properties of undefined (reading 'create')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: Cannot read properties of undefined (reading 'create')"}}
[info] >      at /home/aeturi/amazon-clone/functions/index.js:15:54 {"user":"    at /home/aeturi/amazon-clone/functions/index.js:15:54","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/index.js:15:54"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)"}}
[info] >      at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3) {"user":"    at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15 {"user":"    at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15"}}
[info] >      at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12) {"user":"    at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)"}}
[info] >      at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7) {"user":"    at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:34:23.038Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:34:23.040Z] [worker-us-central1-api-6ca624ae-c0aa-42d9-b092-3aa68c3905ce]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6ca624ae-c0aa-42d9-b092-3aa68c3905ce]: exited"}}
[debug] [2023-07-30T23:34:23.040Z] [worker-us-central1-api-6ca624ae-c0aa-42d9-b092-3aa68c3905ce]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6ca624ae-c0aa-42d9-b092-3aa68c3905ce]: FINISHED"}}
[debug] [2023-07-30T23:39:11.944Z] File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers"}}
[debug] [2023-07-30T23:39:12.946Z] Validating nodejs source
[debug] [2023-07-30T23:39:15.437Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "stripe": "^7.4.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2023-07-30T23:39:15.438Z] Building nodejs source
[debug] [2023-07-30T23:39:15.438Z] Failed to find version of module node: reached end of search path /home/aeturi/amazon-clone/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-07-30T23:39:15.440Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-07-30T23:39:15.442Z] Found firebase-functions binary at '/home/aeturi/amazon-clone/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8561

[debug] [2023-07-30T23:39:16.079Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2023-07-30T23:39:27.005Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:39:27.005Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:39:27.006Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:39:27.005Z"],"workRunningCount":1}
[debug] [2023-07-30T23:39:27.006Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=11.96 --> us-central1-api
[debug] [2023-07-30T23:39:27.009Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:39:27.009Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=11.96, mapping to path=/payments/create?total=11.96 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=11.96, mapping to path=/payments/create?total=11.96"}}
[debug] [2023-07-30T23:39:27.010Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-07-30T23:39:27.022Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:39:27.023Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-07-30T23:39:27.028Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:39:27.028Z"],"queueLength":1,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:39:27.005Z"],"workRunningCount":1}
[debug] [2023-07-30T23:39:27.029Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:39:27.005Z","/clone-96e62/us-central1/api/payments/create-2023-07-30T23:39:27.028Z"],"workRunningCount":2}
[debug] [2023-07-30T23:39:27.029Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=11.96 --> us-central1-api
[debug] [2023-07-30T23:39:27.033Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:39:27.033Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=11.96, mapping to path=/payments/create?total=11.96 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=11.96, mapping to path=/payments/create?total=11.96"}}
[debug] [2023-07-30T23:39:27.050Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:39:27.051Z] [worker-pool] Adding worker with key us-central1-api, total=2 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=2"}}
[debug] [2023-07-30T23:39:28.422Z] [runtime-status] [47361] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47361] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:39:28.424Z] [runtime-status] [47361] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47361] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:39:28.425Z] [runtime-status] [47361] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47361] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:39:28.427Z] [runtime-status] [47361] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47361] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:39:28.462Z] [runtime-status] [47367] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47367] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:39:28.464Z] [runtime-status] [47367] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47367] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:39:28.465Z] [runtime-status] [47367] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47367] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:39:28.468Z] [runtime-status] [47367] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47367] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:39:28.724Z] [runtime-status] [47361] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47361] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:39:28.725Z] [runtime-status] [47361] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47361] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:39:28.726Z] [runtime-status] [47361] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47361] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:39:28.728Z] [runtime-status] [47361] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47361] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:39:28.730Z] [runtime-status] [47361] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47361] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:39:28.731Z] [runtime-status] [47361] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47361] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:39:28.757Z] [runtime-status] [47367] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47367] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:39:28.758Z] [runtime-status] [47367] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47367] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:39:28.761Z] [runtime-status] [47367] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47367] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:39:28.762Z] [runtime-status] [47367] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47367] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:39:28.764Z] [runtime-status] [47367] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47367] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:39:28.765Z] [runtime-status] [47367] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47367] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:39:28.893Z] [runtime-status] [47361] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47361] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:39:28.894Z] [runtime-status] [47361] Listening to port: /tmp/fire_emu_8005c7a8208f3fa4.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47361] Listening to port: /tmp/fire_emu_8005c7a8208f3fa4.sock"}}
[debug] [2023-07-30T23:39:28.924Z] [runtime-status] [47367] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47367] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:39:28.924Z] [runtime-status] [47367] Listening to port: /tmp/fire_emu_28248bdbfca2536c.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47367] Listening to port: /tmp/fire_emu_28248bdbfca2536c.sock"}}
[debug] [2023-07-30T23:39:28.949Z] [worker-us-central1-api-1cd56b82-c2dc-4be1-9278-e9ab6f1d07a7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1cd56b82-c2dc-4be1-9278-e9ab6f1d07a7]: IDLE"}}
[debug] [2023-07-30T23:39:28.949Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:39:28.950Z] [worker-us-central1-api-1cd56b82-c2dc-4be1-9278-e9ab6f1d07a7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1cd56b82-c2dc-4be1-9278-e9ab6f1d07a7]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[debug] [2023-07-30T23:39:28.984Z] [worker-us-central1-api-f785725c-8246-4919-bbf5-7826703ab970]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f785725c-8246-4919-bbf5-7826703ab970]: IDLE"}}
[debug] [2023-07-30T23:39:28.985Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:39:28.985Z] [worker-us-central1-api-f785725c-8246-4919-bbf5-7826703ab970]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f785725c-8246-4919-bbf5-7826703ab970]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  node:internal/process/promises:288 {"user":"node:internal/process/promises:288","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/process/promises:288"}}
[info] >              triggerUncaughtException(err, true /* fromPromise */); {"user":"            triggerUncaughtException(err, true /* fromPromise */);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             triggerUncaughtException(err, true /* fromPromise */);"}}
[info] >              ^ {"user":"            ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  node:internal/process/promises:288 {"user":"node:internal/process/promises:288","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/process/promises:288"}}
[info] >              triggerUncaughtException(err, true /* fromPromise */); {"user":"            triggerUncaughtException(err, true /* fromPromise */);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             triggerUncaughtException(err, true /* fromPromise */);"}}
[info] >              ^ {"user":"            ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             ^"}}
[info] >  Error: Invalid integer: 11.96 {"user":"Error: Invalid integer: 11.96","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error: Invalid integer: 11.96"}}
[info] >      at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16) {"user":"    at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)"}}
[info] >      at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14) {"user":"    at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)"}}
[info] >      at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39) {"user":"    at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)"}}
[info] >      at IncomingMessage.emit (node:events:526:35) {"user":"    at IncomingMessage.emit (node:events:526:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:526:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1359:12) {"user":"    at endReadableNT (node:internal/streams/readable:1359:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1359:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:82:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'Invalid integer: 11.96', {"user":"    message: 'Invalid integer: 11.96',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Invalid integer: 11.96',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_5SFqcEtqcXHVD6?t=1690760369', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_5SFqcEtqcXHVD6?t=1690760369',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_5SFqcEtqcXHVD6?t=1690760369',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Sun, 30 Jul 2023 23:39:29 GMT', {"user":"      date: 'Sun, 30 Jul 2023 23:39:29 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Sun, 30 Jul 2023 23:39:29 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '339', {"user":"      'content-length': '339',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '339',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'idempotency-key': 'e5a9b873-2ba7-4b75-ab9b-cd9bd52ac974', {"user":"      'idempotency-key': 'e5a9b873-2ba7-4b75-ab9b-cd9bd52ac974',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': 'e5a9b873-2ba7-4b75-ab9b-cd9bd52ac974',"}}
[info] >        'original-request': 'req_5SFqcEtqcXHVD6', {"user":"      'original-request': 'req_5SFqcEtqcXHVD6',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_5SFqcEtqcXHVD6',"}}
[info] >        'request-id': 'req_5SFqcEtqcXHVD6', {"user":"      'request-id': 'req_5SFqcEtqcXHVD6',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_5SFqcEtqcXHVD6',"}}
[info] >        'stripe-version': '2022-11-15', {"user":"      'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2022-11-15',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_5SFqcEtqcXHVD6' {"user":"    requestId: 'req_5SFqcEtqcXHVD6'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_5SFqcEtqcXHVD6'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Sun, 30 Jul 2023 23:39:29 GMT', {"user":"    date: 'Sun, 30 Jul 2023 23:39:29 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Sun, 30 Jul 2023 23:39:29 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '339', {"user":"    'content-length': '339',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '339',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'idempotency-key': 'e5a9b873-2ba7-4b75-ab9b-cd9bd52ac974', {"user":"    'idempotency-key': 'e5a9b873-2ba7-4b75-ab9b-cd9bd52ac974',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': 'e5a9b873-2ba7-4b75-ab9b-cd9bd52ac974',"}}
[info] >      'original-request': 'req_5SFqcEtqcXHVD6', {"user":"    'original-request': 'req_5SFqcEtqcXHVD6',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_5SFqcEtqcXHVD6',"}}
[info] >      'request-id': 'req_5SFqcEtqcXHVD6', {"user":"    'request-id': 'req_5SFqcEtqcXHVD6',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_5SFqcEtqcXHVD6',"}}
[info] >      'stripe-version': '2022-11-15', {"user":"    'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2022-11-15',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_5SFqcEtqcXHVD6', {"user":"  requestId: 'req_5SFqcEtqcXHVD6',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_5SFqcEtqcXHVD6',"}}
[info] >    statusCode: 400 {"user":"  statusCode: 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[info] >  Error: Invalid integer: 11.96 {"user":"Error: Invalid integer: 11.96","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error: Invalid integer: 11.96"}}
[info] >      at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16) {"user":"    at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)"}}
[info] >      at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14) {"user":"    at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)"}}
[info] >      at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39) {"user":"    at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)"}}
[info] >      at IncomingMessage.emit (node:events:526:35) {"user":"    at IncomingMessage.emit (node:events:526:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:526:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1359:12) {"user":"    at endReadableNT (node:internal/streams/readable:1359:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1359:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:82:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'Invalid integer: 11.96', {"user":"    message: 'Invalid integer: 11.96',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Invalid integer: 11.96',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_nMUcknIjSv8Pxp?t=1690760369', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_nMUcknIjSv8Pxp?t=1690760369',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_nMUcknIjSv8Pxp?t=1690760369',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Sun, 30 Jul 2023 23:39:29 GMT', {"user":"      date: 'Sun, 30 Jul 2023 23:39:29 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Sun, 30 Jul 2023 23:39:29 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '339', {"user":"      'content-length': '339',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '339',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'idempotency-key': '6d9e0210-507a-4f29-b5b9-efcd37a9c0de', {"user":"      'idempotency-key': '6d9e0210-507a-4f29-b5b9-efcd37a9c0de',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '6d9e0210-507a-4f29-b5b9-efcd37a9c0de',"}}
[info] >        'original-request': 'req_nMUcknIjSv8Pxp', {"user":"      'original-request': 'req_nMUcknIjSv8Pxp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_nMUcknIjSv8Pxp',"}}
[info] >        'request-id': 'req_nMUcknIjSv8Pxp', {"user":"      'request-id': 'req_nMUcknIjSv8Pxp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_nMUcknIjSv8Pxp',"}}
[info] >        'stripe-version': '2022-11-15', {"user":"      'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2022-11-15',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_nMUcknIjSv8Pxp' {"user":"    requestId: 'req_nMUcknIjSv8Pxp'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_nMUcknIjSv8Pxp'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Sun, 30 Jul 2023 23:39:29 GMT', {"user":"    date: 'Sun, 30 Jul 2023 23:39:29 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Sun, 30 Jul 2023 23:39:29 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '339', {"user":"    'content-length': '339',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '339',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'idempotency-key': '6d9e0210-507a-4f29-b5b9-efcd37a9c0de', {"user":"    'idempotency-key': '6d9e0210-507a-4f29-b5b9-efcd37a9c0de',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '6d9e0210-507a-4f29-b5b9-efcd37a9c0de',"}}
[info] >      'original-request': 'req_nMUcknIjSv8Pxp', {"user":"    'original-request': 'req_nMUcknIjSv8Pxp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_nMUcknIjSv8Pxp',"}}
[info] >      'request-id': 'req_nMUcknIjSv8Pxp', {"user":"    'request-id': 'req_nMUcknIjSv8Pxp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_nMUcknIjSv8Pxp',"}}
[info] >      'stripe-version': '2022-11-15', {"user":"    'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2022-11-15',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_nMUcknIjSv8Pxp', {"user":"  requestId: 'req_nMUcknIjSv8Pxp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_nMUcknIjSv8Pxp',"}}
[info] >    statusCode: 400 {"user":"  statusCode: 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:39:30.451Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:39:27.005Z"],"workRunningCount":1}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:39:30.452Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:39:30.453Z] [worker-us-central1-api-1cd56b82-c2dc-4be1-9278-e9ab6f1d07a7]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1cd56b82-c2dc-4be1-9278-e9ab6f1d07a7]: exited"}}
[debug] [2023-07-30T23:39:30.453Z] [worker-us-central1-api-1cd56b82-c2dc-4be1-9278-e9ab6f1d07a7]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1cd56b82-c2dc-4be1-9278-e9ab6f1d07a7]: FINISHED"}}
[debug] [2023-07-30T23:39:30.453Z] [worker-us-central1-api-f785725c-8246-4919-bbf5-7826703ab970]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f785725c-8246-4919-bbf5-7826703ab970]: exited"}}
[debug] [2023-07-30T23:39:30.453Z] [worker-us-central1-api-f785725c-8246-4919-bbf5-7826703ab970]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f785725c-8246-4919-bbf5-7826703ab970]: FINISHED"}}
[debug] [2023-07-30T23:40:27.562Z] File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers"}}
[debug] [2023-07-30T23:40:28.563Z] Validating nodejs source
[debug] [2023-07-30T23:40:31.085Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "stripe": "^7.4.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2023-07-30T23:40:31.086Z] Building nodejs source
[debug] [2023-07-30T23:40:31.086Z] Failed to find version of module node: reached end of search path /home/aeturi/amazon-clone/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-07-30T23:40:31.087Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-07-30T23:40:31.089Z] Found firebase-functions binary at '/home/aeturi/amazon-clone/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8140

[debug] [2023-07-30T23:40:31.736Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2023-07-30T23:40:36.664Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:40:36.664Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:40:36.665Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:40:36.664Z"],"workRunningCount":1}
[debug] [2023-07-30T23:40:36.665Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=11.96 --> us-central1-api
[debug] [2023-07-30T23:40:36.669Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:40:36.669Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=11.96, mapping to path=/payments/create?total=11.96 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=11.96, mapping to path=/payments/create?total=11.96"}}
[debug] [2023-07-30T23:40:36.669Z] [worker-pool] Cleaned up workers for us-central1-api: 2 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 2 --> 0"}}
[debug] [2023-07-30T23:40:36.683Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:40:36.684Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-07-30T23:40:36.707Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:40:36.707Z"],"queueLength":1,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:40:36.664Z"],"workRunningCount":1}
[debug] [2023-07-30T23:40:36.707Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:40:36.664Z","/clone-96e62/us-central1/api/payments/create-2023-07-30T23:40:36.707Z"],"workRunningCount":2}
[debug] [2023-07-30T23:40:36.707Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=11.96 --> us-central1-api
[debug] [2023-07-30T23:40:36.712Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:40:36.712Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=11.96, mapping to path=/payments/create?total=11.96 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=11.96, mapping to path=/payments/create?total=11.96"}}
[debug] [2023-07-30T23:40:36.727Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:40:36.728Z] [worker-pool] Adding worker with key us-central1-api, total=2 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=2"}}
[debug] [2023-07-30T23:40:38.145Z] [runtime-status] [47477] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47477] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:40:38.146Z] [runtime-status] [47477] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47477] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:40:38.148Z] [runtime-status] [47477] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47477] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:40:38.149Z] [runtime-status] [47477] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47477] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:40:38.195Z] [runtime-status] [47483] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47483] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:40:38.197Z] [runtime-status] [47483] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47483] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:40:38.198Z] [runtime-status] [47483] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47483] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:40:38.200Z] [runtime-status] [47483] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47483] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:40:38.447Z] [runtime-status] [47477] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47477] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:40:38.447Z] [runtime-status] [47477] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47477] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:40:38.449Z] [runtime-status] [47477] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47477] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:40:38.451Z] [runtime-status] [47477] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47477] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:40:38.454Z] [runtime-status] [47477] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47477] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:40:38.455Z] [runtime-status] [47477] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47477] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:40:38.486Z] [runtime-status] [47483] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47483] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:40:38.487Z] [runtime-status] [47483] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47483] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:40:38.489Z] [runtime-status] [47483] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47483] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:40:38.490Z] [runtime-status] [47483] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47483] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:40:38.492Z] [runtime-status] [47483] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47483] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:40:38.492Z] [runtime-status] [47483] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47483] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:40:38.638Z] [runtime-status] [47477] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47477] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:40:38.640Z] [runtime-status] [47477] Listening to port: /tmp/fire_emu_ca02a88f8d554d3a.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47477] Listening to port: /tmp/fire_emu_ca02a88f8d554d3a.sock"}}
[debug] [2023-07-30T23:40:38.666Z] [runtime-status] [47483] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47483] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:40:38.667Z] [runtime-status] [47483] Listening to port: /tmp/fire_emu_68bdfe8488d45c65.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47483] Listening to port: /tmp/fire_emu_68bdfe8488d45c65.sock"}}
[debug] [2023-07-30T23:40:38.744Z] [worker-us-central1-api-a3232b92-6a33-4839-91c0-6db538942624]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a3232b92-6a33-4839-91c0-6db538942624]: IDLE"}}
[debug] [2023-07-30T23:40:38.745Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:40:38.746Z] [worker-us-central1-api-a3232b92-6a33-4839-91c0-6db538942624]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a3232b92-6a33-4839-91c0-6db538942624]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[debug] [2023-07-30T23:40:38.778Z] [worker-us-central1-api-3c075219-abad-42ed-a202-ef14ac2776f5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3c075219-abad-42ed-a202-ef14ac2776f5]: IDLE"}}
[debug] [2023-07-30T23:40:38.779Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:40:38.780Z] [worker-us-central1-api-3c075219-abad-42ed-a202-ef14ac2776f5]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3c075219-abad-42ed-a202-ef14ac2776f5]: BUSY"}}
[info] >  /home/aeturi/amazon-clone/functions/index.js:27 {"user":"/home/aeturi/amazon-clone/functions/index.js:27","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /home/aeturi/amazon-clone/functions/index.js:27"}}
[info] >    const paymentIntent = await stripe.paymentIntent.create({ {"user":"  const paymentIntent = await stripe.paymentIntent.create({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   const paymentIntent = await stripe.paymentIntent.create({"}}
[info] >                                                     ^ {"user":"                                                   ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                                                    ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: Cannot read properties of undefined (reading 'create') {"user":"TypeError: Cannot read properties of undefined (reading 'create')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: Cannot read properties of undefined (reading 'create')"}}
[info] >      at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:27:52) {"user":"    at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:27:52)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:27:52)"}}
[info] >      at /home/aeturi/amazon-clone/functions/index.js:37:9 {"user":"    at /home/aeturi/amazon-clone/functions/index.js:37:9","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/index.js:37:9"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)"}}
[info] >      at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3) {"user":"    at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15 {"user":"    at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15"}}
[info] >      at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12) {"user":"    at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)"}}
[info] >      at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7) {"user":"    at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:40:38.814Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:40:36.707Z"],"workRunningCount":1}
[debug] [2023-07-30T23:40:38.818Z] [worker-us-central1-api-a3232b92-6a33-4839-91c0-6db538942624]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a3232b92-6a33-4839-91c0-6db538942624]: exited"}}
[debug] [2023-07-30T23:40:38.818Z] [worker-us-central1-api-a3232b92-6a33-4839-91c0-6db538942624]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a3232b92-6a33-4839-91c0-6db538942624]: FINISHED"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[info] >  /home/aeturi/amazon-clone/functions/index.js:27 {"user":"/home/aeturi/amazon-clone/functions/index.js:27","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /home/aeturi/amazon-clone/functions/index.js:27"}}
[info] >    const paymentIntent = await stripe.paymentIntent.create({ {"user":"  const paymentIntent = await stripe.paymentIntent.create({","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   const paymentIntent = await stripe.paymentIntent.create({"}}
[info] >                                                     ^ {"user":"                                                   ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                                                    ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  TypeError: Cannot read properties of undefined (reading 'create') {"user":"TypeError: Cannot read properties of undefined (reading 'create')","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m TypeError: Cannot read properties of undefined (reading 'create')"}}
[info] >      at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:27:52) {"user":"    at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:27:52)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:27:52)"}}
[info] >      at /home/aeturi/amazon-clone/functions/index.js:37:9 {"user":"    at /home/aeturi/amazon-clone/functions/index.js:37:9","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/index.js:37:9"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)"}}
[info] >      at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3) {"user":"    at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15 {"user":"    at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15"}}
[info] >      at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12) {"user":"    at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)"}}
[info] >      at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7) {"user":"    at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:40:38.861Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:40:38.863Z] [worker-us-central1-api-3c075219-abad-42ed-a202-ef14ac2776f5]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3c075219-abad-42ed-a202-ef14ac2776f5]: exited"}}
[debug] [2023-07-30T23:40:38.863Z] [worker-us-central1-api-3c075219-abad-42ed-a202-ef14ac2776f5]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3c075219-abad-42ed-a202-ef14ac2776f5]: FINISHED"}}
[debug] [2023-07-30T23:44:50.465Z] File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers"}}
[debug] [2023-07-30T23:44:51.466Z] Validating nodejs source
[debug] [2023-07-30T23:44:54.630Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "stripe": "^7.4.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2023-07-30T23:44:54.631Z] Building nodejs source
[debug] [2023-07-30T23:44:54.631Z] Failed to find version of module node: reached end of search path /home/aeturi/amazon-clone/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-07-30T23:44:54.632Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-07-30T23:44:54.634Z] Found firebase-functions binary at '/home/aeturi/amazon-clone/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8540

[debug] [2023-07-30T23:44:55.303Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2023-07-30T23:45:01.455Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:45:01.455Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:45:01.456Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:45:01.455Z"],"workRunningCount":1}
[debug] [2023-07-30T23:45:01.456Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2023-07-30T23:45:01.462Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:45:01.462Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2023-07-30T23:45:01.463Z] [worker-pool] Cleaned up workers for us-central1-api: 2 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 2 --> 0"}}
[debug] [2023-07-30T23:45:01.480Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:45:01.481Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-07-30T23:45:01.485Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:45:01.485Z"],"queueLength":1,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:45:01.455Z"],"workRunningCount":1}
[debug] [2023-07-30T23:45:01.485Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:45:01.455Z","/clone-96e62/us-central1/api/payments/create-2023-07-30T23:45:01.485Z"],"workRunningCount":2}
[debug] [2023-07-30T23:45:01.485Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2023-07-30T23:45:01.499Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:45:01.500Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2023-07-30T23:45:01.517Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:45:01.518Z] [worker-pool] Adding worker with key us-central1-api, total=2 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=2"}}
[debug] [2023-07-30T23:45:03.288Z] [runtime-status] [47720] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47720] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:45:03.290Z] [runtime-status] [47720] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47720] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:45:03.291Z] [runtime-status] [47720] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47720] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:45:03.292Z] [runtime-status] [47720] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47720] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:45:03.332Z] [runtime-status] [47726] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47726] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:45:03.341Z] [runtime-status] [47726] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47726] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:45:03.342Z] [runtime-status] [47726] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47726] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:45:03.342Z] [runtime-status] [47726] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47726] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:45:03.651Z] [runtime-status] [47720] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47720] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:45:03.652Z] [runtime-status] [47720] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47720] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:45:03.654Z] [runtime-status] [47720] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47720] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:45:03.656Z] [runtime-status] [47720] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47720] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:45:03.659Z] [runtime-status] [47720] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47720] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:45:03.660Z] [runtime-status] [47720] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47720] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:45:03.681Z] [runtime-status] [47726] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47726] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:45:03.681Z] [runtime-status] [47726] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47726] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:45:03.683Z] [runtime-status] [47726] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47726] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:45:03.685Z] [runtime-status] [47726] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47726] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:45:03.689Z] [runtime-status] [47726] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47726] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:45:03.689Z] [runtime-status] [47726] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47726] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:45:03.823Z] [runtime-status] [47720] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47720] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:45:03.824Z] [runtime-status] [47720] Listening to port: /tmp/fire_emu_e888263e35f4b712.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47720] Listening to port: /tmp/fire_emu_e888263e35f4b712.sock"}}
[debug] [2023-07-30T23:45:03.852Z] [runtime-status] [47726] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47726] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:45:03.852Z] [runtime-status] [47726] Listening to port: /tmp/fire_emu_e1109cc56262f859.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47726] Listening to port: /tmp/fire_emu_e1109cc56262f859.sock"}}
[debug] [2023-07-30T23:45:03.864Z] [worker-us-central1-api-993bb3b2-c42e-47c4-81fc-275baed002d0]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-993bb3b2-c42e-47c4-81fc-275baed002d0]: IDLE"}}
[debug] [2023-07-30T23:45:03.865Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:45:03.865Z] [worker-us-central1-api-993bb3b2-c42e-47c4-81fc-275baed002d0]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-993bb3b2-c42e-47c4-81fc-275baed002d0]: BUSY"}}
[debug] [2023-07-30T23:45:03.866Z] [worker-us-central1-api-396f40ec-6833-4372-96e3-de11786bfa41]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-396f40ec-6833-4372-96e3-de11786bfa41]: IDLE"}}
[debug] [2023-07-30T23:45:03.867Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:45:03.867Z] [worker-us-central1-api-396f40ec-6833-4372-96e3-de11786bfa41]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-396f40ec-6833-4372-96e3-de11786bfa41]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[info] >  /home/aeturi/amazon-clone/functions/index.js:32 {"user":"/home/aeturi/amazon-clone/functions/index.js:32","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /home/aeturi/amazon-clone/functions/index.js:32"}}
[info] >        clientSecret:paymentIntent.client_secret, {"user":"      clientSecret:paymentIntent.client_secret,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       clientSecret:paymentIntent.client_secret,"}}
[info] >                     ^ {"user":"                   ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                    ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  ReferenceError: paymentIntent is not defined {"user":"ReferenceError: paymentIntent is not defined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ReferenceError: paymentIntent is not defined"}}
[info] >      at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:32:20) {"user":"    at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:32:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:32:20)"}}
[info] >      at /home/aeturi/amazon-clone/functions/index.js:37:9 {"user":"    at /home/aeturi/amazon-clone/functions/index.js:37:9","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/index.js:37:9"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)"}}
[info] >      at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3) {"user":"    at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15 {"user":"    at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15"}}
[info] >      at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12) {"user":"    at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)"}}
[info] >      at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7) {"user":"    at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[info] >  /home/aeturi/amazon-clone/functions/index.js:32 {"user":"/home/aeturi/amazon-clone/functions/index.js:32","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /home/aeturi/amazon-clone/functions/index.js:32"}}
[info] >        clientSecret:paymentIntent.client_secret, {"user":"      clientSecret:paymentIntent.client_secret,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       clientSecret:paymentIntent.client_secret,"}}
[info] >                     ^ {"user":"                   ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                    ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  ReferenceError: paymentIntent is not defined {"user":"ReferenceError: paymentIntent is not defined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ReferenceError: paymentIntent is not defined"}}
[info] >      at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:32:20) {"user":"    at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:32:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:32:20)"}}
[info] >      at /home/aeturi/amazon-clone/functions/index.js:37:9 {"user":"    at /home/aeturi/amazon-clone/functions/index.js:37:9","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/index.js:37:9"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)"}}
[info] >      at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3) {"user":"    at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15 {"user":"    at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15"}}
[info] >      at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12) {"user":"    at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)"}}
[info] >      at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7) {"user":"    at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:45:03.913Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:45:01.485Z"],"workRunningCount":1}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:45:03.915Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:45:03.916Z] [worker-us-central1-api-396f40ec-6833-4372-96e3-de11786bfa41]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-396f40ec-6833-4372-96e3-de11786bfa41]: exited"}}
[debug] [2023-07-30T23:45:03.917Z] [worker-us-central1-api-396f40ec-6833-4372-96e3-de11786bfa41]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-396f40ec-6833-4372-96e3-de11786bfa41]: FINISHED"}}
[debug] [2023-07-30T23:45:03.917Z] [worker-us-central1-api-993bb3b2-c42e-47c4-81fc-275baed002d0]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-993bb3b2-c42e-47c4-81fc-275baed002d0]: exited"}}
[debug] [2023-07-30T23:45:03.918Z] [worker-us-central1-api-993bb3b2-c42e-47c4-81fc-275baed002d0]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-993bb3b2-c42e-47c4-81fc-275baed002d0]: FINISHED"}}
[debug] [2023-07-30T23:45:13.838Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:45:13.838Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:45:13.838Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:45:13.838Z"],"workRunningCount":1}
[debug] [2023-07-30T23:45:13.838Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=98.99 --> us-central1-api
[debug] [2023-07-30T23:45:13.843Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:45:13.844Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=98.99, mapping to path=/payments/create?total=98.99 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=98.99, mapping to path=/payments/create?total=98.99"}}
[debug] [2023-07-30T23:45:13.844Z] [worker-pool] Cleaned up workers for us-central1-api: 2 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 2 --> 0"}}
[debug] [2023-07-30T23:45:13.861Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:45:13.861Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-07-30T23:45:13.871Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:45:13.871Z"],"queueLength":1,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:45:13.838Z"],"workRunningCount":1}
[debug] [2023-07-30T23:45:13.871Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:45:13.838Z","/clone-96e62/us-central1/api/payments/create-2023-07-30T23:45:13.871Z"],"workRunningCount":2}
[debug] [2023-07-30T23:45:13.871Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=98.99 --> us-central1-api
[debug] [2023-07-30T23:45:13.876Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:45:13.877Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=98.99, mapping to path=/payments/create?total=98.99 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=98.99, mapping to path=/payments/create?total=98.99"}}
[debug] [2023-07-30T23:45:13.895Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:45:13.896Z] [worker-pool] Adding worker with key us-central1-api, total=2 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=2"}}
[debug] [2023-07-30T23:45:15.270Z] [runtime-status] [47761] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47761] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:45:15.273Z] [runtime-status] [47761] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47761] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:45:15.275Z] [runtime-status] [47761] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47761] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:45:15.276Z] [runtime-status] [47761] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47761] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:45:15.316Z] [runtime-status] [47767] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47767] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:45:15.319Z] [runtime-status] [47767] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47767] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:45:15.321Z] [runtime-status] [47767] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47767] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:45:15.323Z] [runtime-status] [47767] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47767] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:45:15.579Z] [runtime-status] [47761] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47761] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:45:15.579Z] [runtime-status] [47761] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47761] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:45:15.581Z] [runtime-status] [47761] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47761] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:45:15.584Z] [runtime-status] [47761] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47761] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:45:15.586Z] [runtime-status] [47761] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47761] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:45:15.587Z] [runtime-status] [47761] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47761] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:45:15.610Z] [runtime-status] [47767] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47767] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:45:15.610Z] [runtime-status] [47767] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47767] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:45:15.614Z] [runtime-status] [47767] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47767] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:45:15.614Z] [runtime-status] [47767] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47767] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:45:15.616Z] [runtime-status] [47767] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47767] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:45:15.617Z] [runtime-status] [47767] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47767] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:45:15.756Z] [runtime-status] [47761] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47761] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:45:15.757Z] [runtime-status] [47761] Listening to port: /tmp/fire_emu_009dbeb2cad059df.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47761] Listening to port: /tmp/fire_emu_009dbeb2cad059df.sock"}}
[debug] [2023-07-30T23:45:15.784Z] [runtime-status] [47767] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47767] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:45:15.785Z] [runtime-status] [47767] Listening to port: /tmp/fire_emu_eb083f2ef059e61a.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47767] Listening to port: /tmp/fire_emu_eb083f2ef059e61a.sock"}}
[debug] [2023-07-30T23:45:15.790Z] [worker-us-central1-api-57692d79-9019-4ee2-be00-c15ebc691561]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57692d79-9019-4ee2-be00-c15ebc691561]: IDLE"}}
[debug] [2023-07-30T23:45:15.790Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:45:15.791Z] [worker-us-central1-api-57692d79-9019-4ee2-be00-c15ebc691561]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57692d79-9019-4ee2-be00-c15ebc691561]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[info] >  /home/aeturi/amazon-clone/functions/index.js:32 {"user":"/home/aeturi/amazon-clone/functions/index.js:32","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /home/aeturi/amazon-clone/functions/index.js:32"}}
[info] >        clientSecret:paymentIntent.client_secret, {"user":"      clientSecret:paymentIntent.client_secret,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       clientSecret:paymentIntent.client_secret,"}}
[info] >                     ^ {"user":"                   ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                    ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  ReferenceError: paymentIntent is not defined {"user":"ReferenceError: paymentIntent is not defined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ReferenceError: paymentIntent is not defined"}}
[info] >      at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:32:20) {"user":"    at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:32:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:32:20)"}}
[info] >      at /home/aeturi/amazon-clone/functions/index.js:37:9 {"user":"    at /home/aeturi/amazon-clone/functions/index.js:37:9","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/index.js:37:9"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)"}}
[info] >      at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3) {"user":"    at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15 {"user":"    at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15"}}
[info] >      at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12) {"user":"    at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)"}}
[info] >      at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7) {"user":"    at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:45:15.826Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:45:13.871Z"],"workRunningCount":1}
[debug] [2023-07-30T23:45:15.829Z] [worker-us-central1-api-57692d79-9019-4ee2-be00-c15ebc691561]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57692d79-9019-4ee2-be00-c15ebc691561]: exited"}}
[debug] [2023-07-30T23:45:15.829Z] [worker-us-central1-api-57692d79-9019-4ee2-be00-c15ebc691561]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-57692d79-9019-4ee2-be00-c15ebc691561]: FINISHED"}}
[debug] [2023-07-30T23:45:15.832Z] [worker-us-central1-api-5cfaa5ff-0322-4f0e-9a09-8c422d4ce20c]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5cfaa5ff-0322-4f0e-9a09-8c422d4ce20c]: IDLE"}}
[debug] [2023-07-30T23:45:15.833Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[debug] [2023-07-30T23:45:15.833Z] [worker-pool] Cleaned up workers for us-central1-api: 2 --> 1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 2 --> 1"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:45:15.834Z] [worker-us-central1-api-5cfaa5ff-0322-4f0e-9a09-8c422d4ce20c]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5cfaa5ff-0322-4f0e-9a09-8c422d4ce20c]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[info] >  /home/aeturi/amazon-clone/functions/index.js:32 {"user":"/home/aeturi/amazon-clone/functions/index.js:32","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /home/aeturi/amazon-clone/functions/index.js:32"}}
[info] >        clientSecret:paymentIntent.client_secret, {"user":"      clientSecret:paymentIntent.client_secret,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       clientSecret:paymentIntent.client_secret,"}}
[info] >                     ^ {"user":"                   ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                    ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  ReferenceError: paymentIntent is not defined {"user":"ReferenceError: paymentIntent is not defined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m ReferenceError: paymentIntent is not defined"}}
[info] >      at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:32:20) {"user":"    at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:32:20)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at paymentsCreate (/home/aeturi/amazon-clone/functions/index.js:32:20)"}}
[info] >      at /home/aeturi/amazon-clone/functions/index.js:37:9 {"user":"    at /home/aeturi/amazon-clone/functions/index.js:37:9","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/index.js:37:9"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:144:13)"}}
[info] >      at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3) {"user":"    at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Route.dispatch (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/route.js:114:3)"}}
[info] >      at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5) {"user":"    at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Layer.handle [as handle_request] (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/layer.js:95:5)"}}
[info] >      at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15 {"user":"    at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:284:15"}}
[info] >      at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12) {"user":"    at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.process_params (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:346:12)"}}
[info] >      at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10) {"user":"    at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at next (/home/aeturi/amazon-clone/functions/node_modules/express/lib/router/index.js:280:10)"}}
[info] >      at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7) {"user":"    at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at jsonParser (/home/aeturi/amazon-clone/functions/node_modules/body-parser/lib/types/json.js:119:7)"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:45:15.872Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:45:15.873Z] [worker-us-central1-api-5cfaa5ff-0322-4f0e-9a09-8c422d4ce20c]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5cfaa5ff-0322-4f0e-9a09-8c422d4ce20c]: exited"}}
[debug] [2023-07-30T23:45:15.874Z] [worker-us-central1-api-5cfaa5ff-0322-4f0e-9a09-8c422d4ce20c]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5cfaa5ff-0322-4f0e-9a09-8c422d4ce20c]: FINISHED"}}
[debug] [2023-07-30T23:46:23.490Z] File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers"}}
[debug] [2023-07-30T23:46:24.492Z] Validating nodejs source
[debug] [2023-07-30T23:46:27.365Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "stripe": "^7.4.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2023-07-30T23:46:27.365Z] Building nodejs source
[debug] [2023-07-30T23:46:27.365Z] Failed to find version of module node: reached end of search path /home/aeturi/amazon-clone/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-07-30T23:46:27.368Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-07-30T23:46:27.369Z] Found firebase-functions binary at '/home/aeturi/amazon-clone/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8544

[debug] [2023-07-30T23:46:27.996Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2023-07-30T23:46:34.724Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:46:34.724Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:46:34.724Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:46:34.724Z"],"workRunningCount":1}
[debug] [2023-07-30T23:46:34.724Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2023-07-30T23:46:34.729Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:46:34.729Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2023-07-30T23:46:34.730Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2023-07-30T23:46:34.746Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:46:34.747Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-07-30T23:46:34.752Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:46:34.752Z"],"queueLength":1,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:46:34.724Z"],"workRunningCount":1}
[debug] [2023-07-30T23:46:34.752Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:46:34.724Z","/clone-96e62/us-central1/api/payments/create-2023-07-30T23:46:34.752Z"],"workRunningCount":2}
[debug] [2023-07-30T23:46:34.752Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2023-07-30T23:46:34.758Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:46:34.758Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2023-07-30T23:46:34.776Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:46:34.776Z] [worker-pool] Adding worker with key us-central1-api, total=2 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=2"}}
[debug] [2023-07-30T23:46:36.459Z] [runtime-status] [47881] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47881] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:46:36.462Z] [runtime-status] [47881] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47881] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:46:36.464Z] [runtime-status] [47881] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47881] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:46:36.465Z] [runtime-status] [47881] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47881] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:46:36.489Z] [runtime-status] [47887] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47887] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:46:36.492Z] [runtime-status] [47887] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47887] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:46:36.493Z] [runtime-status] [47887] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47887] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:46:36.495Z] [runtime-status] [47887] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47887] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:46:36.767Z] [runtime-status] [47881] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47881] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:46:36.768Z] [runtime-status] [47881] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47881] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:46:36.769Z] [runtime-status] [47881] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47881] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:46:36.772Z] [runtime-status] [47881] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47881] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:46:36.773Z] [runtime-status] [47881] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47881] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:46:36.774Z] [runtime-status] [47881] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47881] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:46:36.793Z] [runtime-status] [47887] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47887] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:46:36.793Z] [runtime-status] [47887] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47887] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:46:36.795Z] [runtime-status] [47887] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47887] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:46:36.797Z] [runtime-status] [47887] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47887] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:46:36.799Z] [runtime-status] [47887] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47887] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:46:36.799Z] [runtime-status] [47887] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47887] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:46:36.948Z] [runtime-status] [47881] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47881] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:46:36.950Z] [runtime-status] [47881] Listening to port: /tmp/fire_emu_2684419579144b56.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47881] Listening to port: /tmp/fire_emu_2684419579144b56.sock"}}
[debug] [2023-07-30T23:46:36.972Z] [runtime-status] [47887] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47887] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:46:36.973Z] [runtime-status] [47887] Listening to port: /tmp/fire_emu_78fc354bd5ca68fe.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [47887] Listening to port: /tmp/fire_emu_78fc354bd5ca68fe.sock"}}
[debug] [2023-07-30T23:46:36.989Z] [worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: IDLE"}}
[debug] [2023-07-30T23:46:36.990Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:46:36.990Z] [worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[debug] [2023-07-30T23:46:37.011Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 21.323792ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 21.323792ms"}}
[debug] [2023-07-30T23:46:37.012Z] [worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: IDLE"}}
[debug] [2023-07-30T23:46:37.012Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-07-30T23:46:37.013Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-07-30T23:46:37.013Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:46:34.752Z"],"workRunningCount":1}
[debug] [2023-07-30T23:46:37.014Z] [worker-us-central1-api-4831e5a4-53b5-4c11-9222-42e4fccf0c32]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4831e5a4-53b5-4c11-9222-42e4fccf0c32]: IDLE"}}
[debug] [2023-07-30T23:46:37.014Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:46:37.014Z] [worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[debug] [2023-07-30T23:46:37.021Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 6.664864ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 6.664864ms"}}
[debug] [2023-07-30T23:46:37.021Z] [worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: IDLE"}}
[debug] [2023-07-30T23:46:37.022Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-07-30T23:46:37.022Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-07-30T23:46:37.022Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:46:50.610Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:46:50.610Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:46:50.610Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:46:50.610Z"],"workRunningCount":1}
[debug] [2023-07-30T23:46:50.611Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=250.96 --> us-central1-api
[debug] [2023-07-30T23:46:50.614Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:46:50.615Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=250.96, mapping to path=/payments/create?total=250.96 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=250.96, mapping to path=/payments/create?total=250.96"}}
[debug] [2023-07-30T23:46:50.615Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:46:50.615Z] [worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: BUSY"}}
[debug] [2023-07-30T23:46:50.619Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:46:50.619Z"],"queueLength":1,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:46:50.610Z"],"workRunningCount":1}
[debug] [2023-07-30T23:46:50.619Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:46:50.610Z","/clone-96e62/us-central1/api/payments/create-2023-07-30T23:46:50.619Z"],"workRunningCount":2}
[debug] [2023-07-30T23:46:50.619Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=250.96 --> us-central1-api
[debug] [2023-07-30T23:46:50.623Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:46:50.624Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=250.96, mapping to path=/payments/create?total=250.96 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=250.96, mapping to path=/payments/create?total=250.96"}}
[debug] [2023-07-30T23:46:50.624Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:46:50.624Z] [worker-us-central1-api-4831e5a4-53b5-4c11-9222-42e4fccf0c32]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4831e5a4-53b5-4c11-9222-42e4fccf0c32]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[debug] [2023-07-30T23:46:50.629Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 14.461107ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 14.461107ms"}}
[debug] [2023-07-30T23:46:50.630Z] [worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: IDLE"}}
[debug] [2023-07-30T23:46:50.632Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-07-30T23:46:50.633Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-07-30T23:46:50.633Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:46:50.619Z"],"workRunningCount":1}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[debug] [2023-07-30T23:46:50.655Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 30.554719ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 30.554719ms"}}
[debug] [2023-07-30T23:46:50.656Z] [worker-us-central1-api-4831e5a4-53b5-4c11-9222-42e4fccf0c32]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4831e5a4-53b5-4c11-9222-42e4fccf0c32]: IDLE"}}
[debug] [2023-07-30T23:46:50.656Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-07-30T23:46:50.656Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-07-30T23:46:50.656Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:47:43.249Z] File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers"}}
[debug] [2023-07-30T23:47:44.250Z] Validating nodejs source
[debug] [2023-07-30T23:47:46.929Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "stripe": "^7.4.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2023-07-30T23:47:46.929Z] Building nodejs source
[debug] [2023-07-30T23:47:46.930Z] Failed to find version of module node: reached end of search path /home/aeturi/amazon-clone/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-07-30T23:47:46.931Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-07-30T23:47:46.932Z] Found firebase-functions binary at '/home/aeturi/amazon-clone/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8913

[debug] [2023-07-30T23:47:47.554Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2023-07-30T23:47:47.574Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-07-30T23:47:47.575Z] [worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: FINISHING"}}
[debug] [2023-07-30T23:47:47.575Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-07-30T23:47:47.575Z] [worker-us-central1-api-4831e5a4-53b5-4c11-9222-42e4fccf0c32]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4831e5a4-53b5-4c11-9222-42e4fccf0c32]: FINISHING"}}
[debug] [2023-07-30T23:47:47.589Z] [worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: exited"}}
[debug] [2023-07-30T23:47:47.590Z] [worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7e6263e5-6bad-4fcd-97c1-afba844da08d]: FINISHED"}}
[debug] [2023-07-30T23:47:47.590Z] [worker-us-central1-api-4831e5a4-53b5-4c11-9222-42e4fccf0c32]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4831e5a4-53b5-4c11-9222-42e4fccf0c32]: exited"}}
[debug] [2023-07-30T23:47:47.590Z] [worker-us-central1-api-4831e5a4-53b5-4c11-9222-42e4fccf0c32]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-4831e5a4-53b5-4c11-9222-42e4fccf0c32]: FINISHED"}}
[debug] [2023-07-30T23:51:50.387Z] File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers"}}
[debug] [2023-07-30T23:51:51.389Z] Validating nodejs source
[debug] [2023-07-30T23:51:53.988Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "stripe": "^7.4.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2023-07-30T23:51:53.989Z] Building nodejs source
[debug] [2023-07-30T23:51:53.990Z] Failed to find version of module node: reached end of search path /home/aeturi/amazon-clone/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-07-30T23:51:53.992Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-07-30T23:51:53.995Z] Found firebase-functions binary at '/home/aeturi/amazon-clone/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8083

[debug] [2023-07-30T23:51:54.648Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2023-07-30T23:52:16.872Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:52:16.872Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:52:16.873Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:52:16.872Z"],"workRunningCount":1}
[debug] [2023-07-30T23:52:16.873Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2023-07-30T23:52:16.878Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:52:16.879Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2023-07-30T23:52:16.879Z] [worker-pool] Cleaned up workers for us-central1-api: 2 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 2 --> 0"}}
[debug] [2023-07-30T23:52:16.895Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:52:16.895Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-07-30T23:52:16.902Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:52:16.902Z"],"queueLength":1,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:52:16.872Z"],"workRunningCount":1}
[debug] [2023-07-30T23:52:16.902Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:52:16.872Z","/clone-96e62/us-central1/api/payments/create-2023-07-30T23:52:16.902Z"],"workRunningCount":2}
[debug] [2023-07-30T23:52:16.902Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2023-07-30T23:52:16.908Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:52:16.908Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2023-07-30T23:52:16.927Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:52:16.927Z] [worker-pool] Adding worker with key us-central1-api, total=2 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=2"}}
[debug] [2023-07-30T23:52:18.632Z] [runtime-status] [48241] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48241] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:52:18.634Z] [runtime-status] [48241] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48241] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:52:18.635Z] [runtime-status] [48241] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48241] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:52:18.637Z] [runtime-status] [48241] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48241] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:52:18.745Z] [runtime-status] [48235] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48235] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:52:18.747Z] [runtime-status] [48235] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48235] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:52:18.748Z] [runtime-status] [48235] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48235] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:52:18.749Z] [runtime-status] [48235] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48235] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:52:18.981Z] [runtime-status] [48241] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48241] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:52:18.982Z] [runtime-status] [48241] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48241] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:52:18.983Z] [runtime-status] [48241] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48241] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:52:18.984Z] [runtime-status] [48241] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48241] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:52:18.988Z] [runtime-status] [48241] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48241] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:52:18.988Z] [runtime-status] [48241] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48241] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:52:19.072Z] [runtime-status] [48235] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48235] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:52:19.072Z] [runtime-status] [48235] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48235] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:52:19.074Z] [runtime-status] [48235] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48235] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:52:19.075Z] [runtime-status] [48235] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48235] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:52:19.078Z] [runtime-status] [48235] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48235] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:52:19.078Z] [runtime-status] [48235] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48235] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:52:19.154Z] [runtime-status] [48241] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48241] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:52:19.154Z] [runtime-status] [48241] Listening to port: /tmp/fire_emu_ad22f2f0c67170de.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48241] Listening to port: /tmp/fire_emu_ad22f2f0c67170de.sock"}}
[debug] [2023-07-30T23:52:19.240Z] [runtime-status] [48235] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48235] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:52:19.241Z] [runtime-status] [48235] Listening to port: /tmp/fire_emu_f29f06c4adf440c3.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48235] Listening to port: /tmp/fire_emu_f29f06c4adf440c3.sock"}}
[debug] [2023-07-30T23:52:19.261Z] [worker-us-central1-api-6c7a2f3f-420f-46a0-9616-06787d94e273]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6c7a2f3f-420f-46a0-9616-06787d94e273]: IDLE"}}
[debug] [2023-07-30T23:52:19.262Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:52:19.262Z] [worker-us-central1-api-6c7a2f3f-420f-46a0-9616-06787d94e273]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6c7a2f3f-420f-46a0-9616-06787d94e273]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[debug] [2023-07-30T23:52:19.334Z] [worker-us-central1-api-03895cd2-292a-4e08-be92-1548516a786f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-03895cd2-292a-4e08-be92-1548516a786f]: IDLE"}}
[debug] [2023-07-30T23:52:19.334Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:52:19.335Z] [worker-us-central1-api-03895cd2-292a-4e08-be92-1548516a786f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-03895cd2-292a-4e08-be92-1548516a786f]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  node:internal/process/promises:288 {"user":"node:internal/process/promises:288","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/process/promises:288"}}
[info] >              triggerUncaughtException(err, true /* fromPromise */); {"user":"            triggerUncaughtException(err, true /* fromPromise */);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             triggerUncaughtException(err, true /* fromPromise */);"}}
[info] >              ^ {"user":"            ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  node:internal/process/promises:288 {"user":"node:internal/process/promises:288","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/process/promises:288"}}
[info] >              triggerUncaughtException(err, true /* fromPromise */); {"user":"            triggerUncaughtException(err, true /* fromPromise */);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             triggerUncaughtException(err, true /* fromPromise */);"}}
[info] >              ^ {"user":"            ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             ^"}}
[info] >  Error: This value must be greater than or equal to 1. {"user":"Error: This value must be greater than or equal to 1.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error: This value must be greater than or equal to 1."}}
[info] >      at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16) {"user":"    at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)"}}
[info] >      at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14) {"user":"    at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)"}}
[info] >      at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39) {"user":"    at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)"}}
[info] >      at IncomingMessage.emit (node:events:526:35) {"user":"    at IncomingMessage.emit (node:events:526:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:526:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1359:12) {"user":"    at endReadableNT (node:internal/streams/readable:1359:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1359:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:82:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'This value must be greater than or equal to 1.', {"user":"    message: 'This value must be greater than or equal to 1.',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'This value must be greater than or equal to 1.',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_Fh02Nmki0pE78V?t=1690761139', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_Fh02Nmki0pE78V?t=1690761139',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_Fh02Nmki0pE78V?t=1690761139',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Sun, 30 Jul 2023 23:52:19 GMT', {"user":"      date: 'Sun, 30 Jul 2023 23:52:19 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Sun, 30 Jul 2023 23:52:19 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '363', {"user":"      'content-length': '363',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '363',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'idempotency-key': '69d40ea4-1a6d-4819-987c-4ab37d11aa80', {"user":"      'idempotency-key': '69d40ea4-1a6d-4819-987c-4ab37d11aa80',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '69d40ea4-1a6d-4819-987c-4ab37d11aa80',"}}
[info] >        'original-request': 'req_Fh02Nmki0pE78V', {"user":"      'original-request': 'req_Fh02Nmki0pE78V',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_Fh02Nmki0pE78V',"}}
[info] >        'request-id': 'req_Fh02Nmki0pE78V', {"user":"      'request-id': 'req_Fh02Nmki0pE78V',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_Fh02Nmki0pE78V',"}}
[info] >        'stripe-version': '2022-11-15', {"user":"      'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2022-11-15',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_Fh02Nmki0pE78V' {"user":"    requestId: 'req_Fh02Nmki0pE78V'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_Fh02Nmki0pE78V'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Sun, 30 Jul 2023 23:52:19 GMT', {"user":"    date: 'Sun, 30 Jul 2023 23:52:19 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Sun, 30 Jul 2023 23:52:19 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '363', {"user":"    'content-length': '363',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '363',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'idempotency-key': '69d40ea4-1a6d-4819-987c-4ab37d11aa80', {"user":"    'idempotency-key': '69d40ea4-1a6d-4819-987c-4ab37d11aa80',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '69d40ea4-1a6d-4819-987c-4ab37d11aa80',"}}
[info] >      'original-request': 'req_Fh02Nmki0pE78V', {"user":"    'original-request': 'req_Fh02Nmki0pE78V',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_Fh02Nmki0pE78V',"}}
[info] >      'request-id': 'req_Fh02Nmki0pE78V', {"user":"    'request-id': 'req_Fh02Nmki0pE78V',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_Fh02Nmki0pE78V',"}}
[info] >      'stripe-version': '2022-11-15', {"user":"    'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2022-11-15',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_Fh02Nmki0pE78V', {"user":"  requestId: 'req_Fh02Nmki0pE78V',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_Fh02Nmki0pE78V',"}}
[info] >    statusCode: 400 {"user":"  statusCode: 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[info] >  Error: This value must be greater than or equal to 1. {"user":"Error: This value must be greater than or equal to 1.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error: This value must be greater than or equal to 1."}}
[info] >      at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16) {"user":"    at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)"}}
[info] >      at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14) {"user":"    at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)"}}
[info] >      at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39) {"user":"    at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)"}}
[info] >      at IncomingMessage.emit (node:events:526:35) {"user":"    at IncomingMessage.emit (node:events:526:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:526:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1359:12) {"user":"    at endReadableNT (node:internal/streams/readable:1359:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1359:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:82:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'This value must be greater than or equal to 1.', {"user":"    message: 'This value must be greater than or equal to 1.',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'This value must be greater than or equal to 1.',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_R9LelNetO6zGvi?t=1690761139', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_R9LelNetO6zGvi?t=1690761139',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_R9LelNetO6zGvi?t=1690761139',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Sun, 30 Jul 2023 23:52:20 GMT', {"user":"      date: 'Sun, 30 Jul 2023 23:52:20 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Sun, 30 Jul 2023 23:52:20 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '363', {"user":"      'content-length': '363',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '363',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'idempotency-key': 'dcc53ada-3bfa-40bd-a41b-6bace1200cbf', {"user":"      'idempotency-key': 'dcc53ada-3bfa-40bd-a41b-6bace1200cbf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': 'dcc53ada-3bfa-40bd-a41b-6bace1200cbf',"}}
[info] >        'original-request': 'req_R9LelNetO6zGvi', {"user":"      'original-request': 'req_R9LelNetO6zGvi',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_R9LelNetO6zGvi',"}}
[info] >        'request-id': 'req_R9LelNetO6zGvi', {"user":"      'request-id': 'req_R9LelNetO6zGvi',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_R9LelNetO6zGvi',"}}
[info] >        'stripe-version': '2022-11-15', {"user":"      'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2022-11-15',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_R9LelNetO6zGvi' {"user":"    requestId: 'req_R9LelNetO6zGvi'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_R9LelNetO6zGvi'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Sun, 30 Jul 2023 23:52:20 GMT', {"user":"    date: 'Sun, 30 Jul 2023 23:52:20 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Sun, 30 Jul 2023 23:52:20 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '363', {"user":"    'content-length': '363',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '363',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'idempotency-key': 'dcc53ada-3bfa-40bd-a41b-6bace1200cbf', {"user":"    'idempotency-key': 'dcc53ada-3bfa-40bd-a41b-6bace1200cbf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': 'dcc53ada-3bfa-40bd-a41b-6bace1200cbf',"}}
[info] >      'original-request': 'req_R9LelNetO6zGvi', {"user":"    'original-request': 'req_R9LelNetO6zGvi',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_R9LelNetO6zGvi',"}}
[info] >      'request-id': 'req_R9LelNetO6zGvi', {"user":"    'request-id': 'req_R9LelNetO6zGvi',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_R9LelNetO6zGvi',"}}
[info] >      'stripe-version': '2022-11-15', {"user":"    'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2022-11-15',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_R9LelNetO6zGvi', {"user":"  requestId: 'req_R9LelNetO6zGvi',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_R9LelNetO6zGvi',"}}
[info] >    statusCode: 400 {"user":"  statusCode: 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:52:20.381Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:52:16.902Z"],"workRunningCount":1}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:52:20.383Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:52:20.384Z] [worker-us-central1-api-03895cd2-292a-4e08-be92-1548516a786f]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-03895cd2-292a-4e08-be92-1548516a786f]: exited"}}
[debug] [2023-07-30T23:52:20.385Z] [worker-us-central1-api-03895cd2-292a-4e08-be92-1548516a786f]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-03895cd2-292a-4e08-be92-1548516a786f]: FINISHED"}}
[debug] [2023-07-30T23:52:20.385Z] [worker-us-central1-api-6c7a2f3f-420f-46a0-9616-06787d94e273]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6c7a2f3f-420f-46a0-9616-06787d94e273]: exited"}}
[debug] [2023-07-30T23:52:20.385Z] [worker-us-central1-api-6c7a2f3f-420f-46a0-9616-06787d94e273]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6c7a2f3f-420f-46a0-9616-06787d94e273]: FINISHED"}}
[debug] [2023-07-30T23:52:31.056Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:52:31.056Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:52:31.057Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:52:31.056Z"],"workRunningCount":1}
[debug] [2023-07-30T23:52:31.057Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=598.99 --> us-central1-api
[debug] [2023-07-30T23:52:31.062Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:52:31.062Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=598.99, mapping to path=/payments/create?total=598.99 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=598.99, mapping to path=/payments/create?total=598.99"}}
[debug] [2023-07-30T23:52:31.063Z] [worker-pool] Cleaned up workers for us-central1-api: 2 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 2 --> 0"}}
[debug] [2023-07-30T23:52:31.080Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:52:31.081Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-07-30T23:52:31.087Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:52:31.087Z"],"queueLength":1,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:52:31.056Z"],"workRunningCount":1}
[debug] [2023-07-30T23:52:31.087Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:52:31.056Z","/clone-96e62/us-central1/api/payments/create-2023-07-30T23:52:31.087Z"],"workRunningCount":2}
[debug] [2023-07-30T23:52:31.087Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=598.99 --> us-central1-api
[debug] [2023-07-30T23:52:31.092Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:52:31.092Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=598.99, mapping to path=/payments/create?total=598.99 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=598.99, mapping to path=/payments/create?total=598.99"}}
[debug] [2023-07-30T23:52:31.108Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:52:31.109Z] [worker-pool] Adding worker with key us-central1-api, total=2 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=2"}}
[debug] [2023-07-30T23:52:32.573Z] [runtime-status] [48302] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48302] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:52:32.576Z] [runtime-status] [48302] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48302] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:52:32.577Z] [runtime-status] [48302] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48302] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:52:32.579Z] [runtime-status] [48302] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48302] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:52:32.594Z] [runtime-status] [48303] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48303] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:52:32.596Z] [runtime-status] [48303] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48303] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:52:32.597Z] [runtime-status] [48303] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48303] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:52:32.599Z] [runtime-status] [48303] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48303] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:52:32.866Z] [runtime-status] [48302] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48302] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:52:32.867Z] [runtime-status] [48302] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48302] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:52:32.868Z] [runtime-status] [48302] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48302] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:52:32.870Z] [runtime-status] [48302] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48302] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:52:32.872Z] [runtime-status] [48302] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48302] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:52:32.873Z] [runtime-status] [48302] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48302] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:52:32.894Z] [runtime-status] [48303] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48303] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:52:32.894Z] [runtime-status] [48303] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48303] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:52:32.896Z] [runtime-status] [48303] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48303] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:52:32.897Z] [runtime-status] [48303] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48303] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:52:32.901Z] [runtime-status] [48303] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48303] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:52:32.901Z] [runtime-status] [48303] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48303] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:52:33.041Z] [runtime-status] [48302] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48302] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:52:33.042Z] [runtime-status] [48302] Listening to port: /tmp/fire_emu_013da636db197314.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48302] Listening to port: /tmp/fire_emu_013da636db197314.sock"}}
[debug] [2023-07-30T23:52:33.077Z] [runtime-status] [48303] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48303] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:52:33.078Z] [runtime-status] [48303] Listening to port: /tmp/fire_emu_f6899f90e7f5ef5f.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48303] Listening to port: /tmp/fire_emu_f6899f90e7f5ef5f.sock"}}
[debug] [2023-07-30T23:52:33.107Z] [worker-us-central1-api-3a65b297-a986-4de5-a511-0359c9973c61]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3a65b297-a986-4de5-a511-0359c9973c61]: IDLE"}}
[debug] [2023-07-30T23:52:33.107Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:52:33.108Z] [worker-us-central1-api-3a65b297-a986-4de5-a511-0359c9973c61]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3a65b297-a986-4de5-a511-0359c9973c61]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[debug] [2023-07-30T23:52:33.139Z] [worker-us-central1-api-6d6c03bf-2481-4830-832b-4c3210601315]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6d6c03bf-2481-4830-832b-4c3210601315]: IDLE"}}
[debug] [2023-07-30T23:52:33.139Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:52:33.140Z] [worker-us-central1-api-6d6c03bf-2481-4830-832b-4c3210601315]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6d6c03bf-2481-4830-832b-4c3210601315]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  node:internal/process/promises:288 {"user":"node:internal/process/promises:288","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/process/promises:288"}}
[info] >              triggerUncaughtException(err, true /* fromPromise */); {"user":"            triggerUncaughtException(err, true /* fromPromise */);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             triggerUncaughtException(err, true /* fromPromise */);"}}
[info] >              ^ {"user":"            ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             ^"}}
[info] >  Error: Invalid integer: 598.99 {"user":"Error: Invalid integer: 598.99","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error: Invalid integer: 598.99"}}
[info] >      at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16) {"user":"    at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)"}}
[info] >      at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14) {"user":"    at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)"}}
[info] >      at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39) {"user":"    at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)"}}
[info] >      at IncomingMessage.emit (node:events:526:35) {"user":"    at IncomingMessage.emit (node:events:526:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:526:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1359:12) {"user":"    at endReadableNT (node:internal/streams/readable:1359:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1359:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:82:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'Invalid integer: 598.99', {"user":"    message: 'Invalid integer: 598.99',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Invalid integer: 598.99',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_VhiaICFgZ4qK7D?t=1690761153', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_VhiaICFgZ4qK7D?t=1690761153',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_VhiaICFgZ4qK7D?t=1690761153',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Sun, 30 Jul 2023 23:52:33 GMT', {"user":"      date: 'Sun, 30 Jul 2023 23:52:33 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Sun, 30 Jul 2023 23:52:33 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '340', {"user":"      'content-length': '340',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '340',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'idempotency-key': 'f4455b95-44c1-4e67-974f-58b5b5f07bb1', {"user":"      'idempotency-key': 'f4455b95-44c1-4e67-974f-58b5b5f07bb1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': 'f4455b95-44c1-4e67-974f-58b5b5f07bb1',"}}
[info] >        'original-request': 'req_VhiaICFgZ4qK7D', {"user":"      'original-request': 'req_VhiaICFgZ4qK7D',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_VhiaICFgZ4qK7D',"}}
[info] >        'request-id': 'req_VhiaICFgZ4qK7D', {"user":"      'request-id': 'req_VhiaICFgZ4qK7D',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_VhiaICFgZ4qK7D',"}}
[info] >        'stripe-version': '2022-11-15', {"user":"      'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2022-11-15',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_VhiaICFgZ4qK7D' {"user":"    requestId: 'req_VhiaICFgZ4qK7D'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_VhiaICFgZ4qK7D'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Sun, 30 Jul 2023 23:52:33 GMT', {"user":"    date: 'Sun, 30 Jul 2023 23:52:33 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Sun, 30 Jul 2023 23:52:33 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '340', {"user":"    'content-length': '340',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '340',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'idempotency-key': 'f4455b95-44c1-4e67-974f-58b5b5f07bb1', {"user":"    'idempotency-key': 'f4455b95-44c1-4e67-974f-58b5b5f07bb1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': 'f4455b95-44c1-4e67-974f-58b5b5f07bb1',"}}
[info] >      'original-request': 'req_VhiaICFgZ4qK7D', {"user":"    'original-request': 'req_VhiaICFgZ4qK7D',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_VhiaICFgZ4qK7D',"}}
[info] >      'request-id': 'req_VhiaICFgZ4qK7D', {"user":"    'request-id': 'req_VhiaICFgZ4qK7D',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_VhiaICFgZ4qK7D',"}}
[info] >      'stripe-version': '2022-11-15', {"user":"    'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2022-11-15',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_VhiaICFgZ4qK7D', {"user":"  requestId: 'req_VhiaICFgZ4qK7D',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_VhiaICFgZ4qK7D',"}}
[info] >    statusCode: 400 {"user":"  statusCode: 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  node:internal/process/promises:288 {"user":"node:internal/process/promises:288","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/process/promises:288"}}
[info] >              triggerUncaughtException(err, true /* fromPromise */); {"user":"            triggerUncaughtException(err, true /* fromPromise */);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             triggerUncaughtException(err, true /* fromPromise */);"}}
[info] >              ^ {"user":"            ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             ^"}}
[info] >  Error: Invalid integer: 598.99 {"user":"Error: Invalid integer: 598.99","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error: Invalid integer: 598.99"}}
[info] >      at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16) {"user":"    at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)"}}
[info] >      at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14) {"user":"    at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)"}}
[info] >      at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39) {"user":"    at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)"}}
[info] >      at IncomingMessage.emit (node:events:526:35) {"user":"    at IncomingMessage.emit (node:events:526:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:526:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1359:12) {"user":"    at endReadableNT (node:internal/streams/readable:1359:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1359:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:82:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'Invalid integer: 598.99', {"user":"    message: 'Invalid integer: 598.99',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Invalid integer: 598.99',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_D5jBHTE8TILTVQ?t=1690761153', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_D5jBHTE8TILTVQ?t=1690761153',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_D5jBHTE8TILTVQ?t=1690761153',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Sun, 30 Jul 2023 23:52:33 GMT', {"user":"      date: 'Sun, 30 Jul 2023 23:52:33 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Sun, 30 Jul 2023 23:52:33 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '340', {"user":"      'content-length': '340',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '340',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'idempotency-key': '2472a107-6fa8-440a-964b-ea868439972b', {"user":"      'idempotency-key': '2472a107-6fa8-440a-964b-ea868439972b',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '2472a107-6fa8-440a-964b-ea868439972b',"}}
[info] >        'original-request': 'req_D5jBHTE8TILTVQ', {"user":"      'original-request': 'req_D5jBHTE8TILTVQ',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_D5jBHTE8TILTVQ',"}}
[info] >        'request-id': 'req_D5jBHTE8TILTVQ', {"user":"      'request-id': 'req_D5jBHTE8TILTVQ',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_D5jBHTE8TILTVQ',"}}
[info] >        'stripe-version': '2022-11-15', {"user":"      'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2022-11-15',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_D5jBHTE8TILTVQ' {"user":"    requestId: 'req_D5jBHTE8TILTVQ'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_D5jBHTE8TILTVQ'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Sun, 30 Jul 2023 23:52:33 GMT', {"user":"    date: 'Sun, 30 Jul 2023 23:52:33 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Sun, 30 Jul 2023 23:52:33 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '340', {"user":"    'content-length': '340',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '340',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'idempotency-key': '2472a107-6fa8-440a-964b-ea868439972b', {"user":"    'idempotency-key': '2472a107-6fa8-440a-964b-ea868439972b',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '2472a107-6fa8-440a-964b-ea868439972b',"}}
[info] >      'original-request': 'req_D5jBHTE8TILTVQ', {"user":"    'original-request': 'req_D5jBHTE8TILTVQ',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_D5jBHTE8TILTVQ',"}}
[info] >      'request-id': 'req_D5jBHTE8TILTVQ', {"user":"    'request-id': 'req_D5jBHTE8TILTVQ',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_D5jBHTE8TILTVQ',"}}
[info] >      'stripe-version': '2022-11-15', {"user":"    'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2022-11-15',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_D5jBHTE8TILTVQ', {"user":"  requestId: 'req_D5jBHTE8TILTVQ',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_D5jBHTE8TILTVQ',"}}
[info] >    statusCode: 400 {"user":"  statusCode: 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:52:33.804Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:52:31.087Z"],"workRunningCount":1}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:52:33.806Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:52:33.807Z] [worker-us-central1-api-3a65b297-a986-4de5-a511-0359c9973c61]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3a65b297-a986-4de5-a511-0359c9973c61]: exited"}}
[debug] [2023-07-30T23:52:33.807Z] [worker-us-central1-api-3a65b297-a986-4de5-a511-0359c9973c61]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3a65b297-a986-4de5-a511-0359c9973c61]: FINISHED"}}
[debug] [2023-07-30T23:52:33.807Z] [worker-us-central1-api-6d6c03bf-2481-4830-832b-4c3210601315]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6d6c03bf-2481-4830-832b-4c3210601315]: exited"}}
[debug] [2023-07-30T23:52:33.807Z] [worker-us-central1-api-6d6c03bf-2481-4830-832b-4c3210601315]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6d6c03bf-2481-4830-832b-4c3210601315]: FINISHED"}}
[debug] [2023-07-30T23:53:05.139Z] File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers"}}
[debug] [2023-07-30T23:53:06.140Z] Validating nodejs source
[debug] [2023-07-30T23:53:08.504Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "stripe": "^7.4.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2023-07-30T23:53:08.505Z] Building nodejs source
[debug] [2023-07-30T23:53:08.505Z] Failed to find version of module node: reached end of search path /home/aeturi/amazon-clone/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-07-30T23:53:08.506Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-07-30T23:53:08.508Z] Found firebase-functions binary at '/home/aeturi/amazon-clone/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8074

[debug] [2023-07-30T23:53:09.180Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2023-07-30T23:53:11.510Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:53:11.509Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:53:11.510Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:53:11.509Z"],"workRunningCount":1}
[debug] [2023-07-30T23:53:11.510Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=598.99 --> us-central1-api
[debug] [2023-07-30T23:53:11.514Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:53:11.516Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=598.99, mapping to path=/payments/create?total=598.99 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=598.99, mapping to path=/payments/create?total=598.99"}}
[debug] [2023-07-30T23:53:11.517Z] [worker-pool] Cleaned up workers for us-central1-api: 2 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 2 --> 0"}}
[debug] [2023-07-30T23:53:11.529Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:53:11.530Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-07-30T23:53:11.535Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:53:11.534Z"],"queueLength":1,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:53:11.509Z"],"workRunningCount":1}
[debug] [2023-07-30T23:53:11.535Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:53:11.509Z","/clone-96e62/us-central1/api/payments/create-2023-07-30T23:53:11.534Z"],"workRunningCount":2}
[debug] [2023-07-30T23:53:11.535Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=598.99 --> us-central1-api
[debug] [2023-07-30T23:53:11.539Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:53:11.540Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=598.99, mapping to path=/payments/create?total=598.99 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=598.99, mapping to path=/payments/create?total=598.99"}}
[debug] [2023-07-30T23:53:11.557Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:53:11.558Z] [worker-pool] Adding worker with key us-central1-api, total=2 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=2"}}
[debug] [2023-07-30T23:53:13.000Z] [runtime-status] [48413] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48413] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:53:13.002Z] [runtime-status] [48413] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48413] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:53:13.006Z] [runtime-status] [48413] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48413] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:53:13.006Z] [runtime-status] [48413] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48413] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:53:13.020Z] [runtime-status] [48419] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48419] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:53:13.022Z] [runtime-status] [48419] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48419] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:53:13.023Z] [runtime-status] [48419] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48419] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:53:13.025Z] [runtime-status] [48419] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48419] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:53:13.289Z] [runtime-status] [48413] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48413] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:53:13.289Z] [runtime-status] [48413] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48413] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:53:13.291Z] [runtime-status] [48413] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48413] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:53:13.293Z] [runtime-status] [48413] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48413] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:53:13.295Z] [runtime-status] [48413] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48413] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:53:13.295Z] [runtime-status] [48413] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48413] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:53:13.335Z] [runtime-status] [48419] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48419] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:53:13.336Z] [runtime-status] [48419] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48419] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:53:13.338Z] [runtime-status] [48419] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48419] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:53:13.340Z] [runtime-status] [48419] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48419] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:53:13.344Z] [runtime-status] [48419] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48419] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:53:13.344Z] [runtime-status] [48419] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48419] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:53:13.462Z] [runtime-status] [48413] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48413] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:53:13.462Z] [runtime-status] [48413] Listening to port: /tmp/fire_emu_9632af5caea8b78c.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48413] Listening to port: /tmp/fire_emu_9632af5caea8b78c.sock"}}
[debug] [2023-07-30T23:53:13.509Z] [runtime-status] [48419] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48419] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:53:13.510Z] [runtime-status] [48419] Listening to port: /tmp/fire_emu_894d85035815dc84.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48419] Listening to port: /tmp/fire_emu_894d85035815dc84.sock"}}
[debug] [2023-07-30T23:53:13.568Z] [worker-us-central1-api-88c23d00-c5b3-4643-93b8-f4928cce6916]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-88c23d00-c5b3-4643-93b8-f4928cce6916]: IDLE"}}
[debug] [2023-07-30T23:53:13.568Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:53:13.569Z] [worker-us-central1-api-88c23d00-c5b3-4643-93b8-f4928cce6916]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-88c23d00-c5b3-4643-93b8-f4928cce6916]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[debug] [2023-07-30T23:53:13.595Z] [worker-us-central1-api-a1effcb9-df91-4074-b295-7f746e35adf2]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a1effcb9-df91-4074-b295-7f746e35adf2]: IDLE"}}
[debug] [2023-07-30T23:53:13.596Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:53:13.597Z] [worker-us-central1-api-a1effcb9-df91-4074-b295-7f746e35adf2]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a1effcb9-df91-4074-b295-7f746e35adf2]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  node:internal/process/promises:288 {"user":"node:internal/process/promises:288","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/process/promises:288"}}
[info] >              triggerUncaughtException(err, true /* fromPromise */); {"user":"            triggerUncaughtException(err, true /* fromPromise */);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             triggerUncaughtException(err, true /* fromPromise */);"}}
[info] >              ^ {"user":"            ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             ^"}}
[info] >  Error: Invalid integer: 598.99 {"user":"Error: Invalid integer: 598.99","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error: Invalid integer: 598.99"}}
[info] >      at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16) {"user":"    at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)"}}
[info] >      at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14) {"user":"    at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)"}}
[info] >      at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39) {"user":"    at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)"}}
[info] >      at IncomingMessage.emit (node:events:526:35) {"user":"    at IncomingMessage.emit (node:events:526:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:526:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1359:12) {"user":"    at endReadableNT (node:internal/streams/readable:1359:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1359:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:82:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'Invalid integer: 598.99', {"user":"    message: 'Invalid integer: 598.99',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Invalid integer: 598.99',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_A8YCyHRDWBMKOZ?t=1690761194', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_A8YCyHRDWBMKOZ?t=1690761194',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_A8YCyHRDWBMKOZ?t=1690761194',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Sun, 30 Jul 2023 23:53:14 GMT', {"user":"      date: 'Sun, 30 Jul 2023 23:53:14 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Sun, 30 Jul 2023 23:53:14 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '340', {"user":"      'content-length': '340',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '340',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'idempotency-key': 'a0cdcaab-a2ab-430e-ba2f-dcc5067143fe', {"user":"      'idempotency-key': 'a0cdcaab-a2ab-430e-ba2f-dcc5067143fe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': 'a0cdcaab-a2ab-430e-ba2f-dcc5067143fe',"}}
[info] >        'original-request': 'req_A8YCyHRDWBMKOZ', {"user":"      'original-request': 'req_A8YCyHRDWBMKOZ',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_A8YCyHRDWBMKOZ',"}}
[info] >        'request-id': 'req_A8YCyHRDWBMKOZ', {"user":"      'request-id': 'req_A8YCyHRDWBMKOZ',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_A8YCyHRDWBMKOZ',"}}
[info] >        'stripe-version': '2022-11-15', {"user":"      'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2022-11-15',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_A8YCyHRDWBMKOZ' {"user":"    requestId: 'req_A8YCyHRDWBMKOZ'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_A8YCyHRDWBMKOZ'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Sun, 30 Jul 2023 23:53:14 GMT', {"user":"    date: 'Sun, 30 Jul 2023 23:53:14 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Sun, 30 Jul 2023 23:53:14 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '340', {"user":"    'content-length': '340',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '340',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'idempotency-key': 'a0cdcaab-a2ab-430e-ba2f-dcc5067143fe', {"user":"    'idempotency-key': 'a0cdcaab-a2ab-430e-ba2f-dcc5067143fe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': 'a0cdcaab-a2ab-430e-ba2f-dcc5067143fe',"}}
[info] >      'original-request': 'req_A8YCyHRDWBMKOZ', {"user":"    'original-request': 'req_A8YCyHRDWBMKOZ',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_A8YCyHRDWBMKOZ',"}}
[info] >      'request-id': 'req_A8YCyHRDWBMKOZ', {"user":"    'request-id': 'req_A8YCyHRDWBMKOZ',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_A8YCyHRDWBMKOZ',"}}
[info] >      'stripe-version': '2022-11-15', {"user":"    'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2022-11-15',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_A8YCyHRDWBMKOZ', {"user":"  requestId: 'req_A8YCyHRDWBMKOZ',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_A8YCyHRDWBMKOZ',"}}
[info] >    statusCode: 400 {"user":"  statusCode: 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:53:14.262Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:53:11.534Z"],"workRunningCount":1}
[debug] [2023-07-30T23:53:14.263Z] [worker-us-central1-api-88c23d00-c5b3-4643-93b8-f4928cce6916]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-88c23d00-c5b3-4643-93b8-f4928cce6916]: exited"}}
[debug] [2023-07-30T23:53:14.263Z] [worker-us-central1-api-88c23d00-c5b3-4643-93b8-f4928cce6916]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-88c23d00-c5b3-4643-93b8-f4928cce6916]: FINISHED"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  node:internal/process/promises:288 {"user":"node:internal/process/promises:288","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/process/promises:288"}}
[info] >              triggerUncaughtException(err, true /* fromPromise */); {"user":"            triggerUncaughtException(err, true /* fromPromise */);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             triggerUncaughtException(err, true /* fromPromise */);"}}
[info] >              ^ {"user":"            ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             ^"}}
[info] >  Error: Invalid integer: 598.99 {"user":"Error: Invalid integer: 598.99","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error: Invalid integer: 598.99"}}
[info] >      at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16) {"user":"    at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)"}}
[info] >      at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14) {"user":"    at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)"}}
[info] >      at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39) {"user":"    at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)"}}
[info] >      at IncomingMessage.emit (node:events:526:35) {"user":"    at IncomingMessage.emit (node:events:526:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:526:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1359:12) {"user":"    at endReadableNT (node:internal/streams/readable:1359:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1359:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:82:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'Invalid integer: 598.99', {"user":"    message: 'Invalid integer: 598.99',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Invalid integer: 598.99',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_pB171H2MTdLoZd?t=1690761194', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_pB171H2MTdLoZd?t=1690761194',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_pB171H2MTdLoZd?t=1690761194',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Sun, 30 Jul 2023 23:53:14 GMT', {"user":"      date: 'Sun, 30 Jul 2023 23:53:14 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Sun, 30 Jul 2023 23:53:14 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '340', {"user":"      'content-length': '340',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '340',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'idempotency-key': '01315303-5153-41f6-a099-4d3c713f0891', {"user":"      'idempotency-key': '01315303-5153-41f6-a099-4d3c713f0891',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '01315303-5153-41f6-a099-4d3c713f0891',"}}
[info] >        'original-request': 'req_pB171H2MTdLoZd', {"user":"      'original-request': 'req_pB171H2MTdLoZd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_pB171H2MTdLoZd',"}}
[info] >        'request-id': 'req_pB171H2MTdLoZd', {"user":"      'request-id': 'req_pB171H2MTdLoZd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_pB171H2MTdLoZd',"}}
[info] >        'stripe-version': '2022-11-15', {"user":"      'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2022-11-15',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_pB171H2MTdLoZd' {"user":"    requestId: 'req_pB171H2MTdLoZd'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_pB171H2MTdLoZd'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Sun, 30 Jul 2023 23:53:14 GMT', {"user":"    date: 'Sun, 30 Jul 2023 23:53:14 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Sun, 30 Jul 2023 23:53:14 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '340', {"user":"    'content-length': '340',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '340',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'idempotency-key': '01315303-5153-41f6-a099-4d3c713f0891', {"user":"    'idempotency-key': '01315303-5153-41f6-a099-4d3c713f0891',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '01315303-5153-41f6-a099-4d3c713f0891',"}}
[info] >      'original-request': 'req_pB171H2MTdLoZd', {"user":"    'original-request': 'req_pB171H2MTdLoZd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_pB171H2MTdLoZd',"}}
[info] >      'request-id': 'req_pB171H2MTdLoZd', {"user":"    'request-id': 'req_pB171H2MTdLoZd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_pB171H2MTdLoZd',"}}
[info] >      'stripe-version': '2022-11-15', {"user":"    'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2022-11-15',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_pB171H2MTdLoZd', {"user":"  requestId: 'req_pB171H2MTdLoZd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_pB171H2MTdLoZd',"}}
[info] >    statusCode: 400 {"user":"  statusCode: 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:53:14.376Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:53:14.377Z] [worker-us-central1-api-a1effcb9-df91-4074-b295-7f746e35adf2]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a1effcb9-df91-4074-b295-7f746e35adf2]: exited"}}
[debug] [2023-07-30T23:53:14.377Z] [worker-us-central1-api-a1effcb9-df91-4074-b295-7f746e35adf2]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-a1effcb9-df91-4074-b295-7f746e35adf2]: FINISHED"}}
[debug] [2023-07-30T23:55:30.497Z] File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers"}}
[debug] [2023-07-30T23:55:31.498Z] Validating nodejs source
[debug] [2023-07-30T23:55:33.035Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "stripe": "^7.4.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2023-07-30T23:55:33.035Z] Building nodejs source
[debug] [2023-07-30T23:55:33.035Z] Failed to find version of module node: reached end of search path /home/aeturi/amazon-clone/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-07-30T23:55:33.036Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-07-30T23:55:33.038Z] Found firebase-functions binary at '/home/aeturi/amazon-clone/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8045

[debug] [2023-07-30T23:55:33.719Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2023-07-30T23:55:43.292Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:55:43.292Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:55:43.292Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:55:43.292Z"],"workRunningCount":1}
[debug] [2023-07-30T23:55:43.293Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=598.99 --> us-central1-api
[debug] [2023-07-30T23:55:43.298Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:55:43.298Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=598.99, mapping to path=/payments/create?total=598.99 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=598.99, mapping to path=/payments/create?total=598.99"}}
[debug] [2023-07-30T23:55:43.298Z] [worker-pool] Cleaned up workers for us-central1-api: 2 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 2 --> 0"}}
[debug] [2023-07-30T23:55:43.315Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:55:43.315Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-07-30T23:55:43.318Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:55:43.318Z"],"queueLength":1,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:55:43.292Z"],"workRunningCount":1}
[debug] [2023-07-30T23:55:43.319Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:55:43.292Z","/clone-96e62/us-central1/api/payments/create-2023-07-30T23:55:43.318Z"],"workRunningCount":2}
[debug] [2023-07-30T23:55:43.319Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=598.99 --> us-central1-api
[debug] [2023-07-30T23:55:43.324Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:55:43.325Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=598.99, mapping to path=/payments/create?total=598.99 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=598.99, mapping to path=/payments/create?total=598.99"}}
[debug] [2023-07-30T23:55:43.339Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:55:43.339Z] [worker-pool] Adding worker with key us-central1-api, total=2 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=2"}}
[debug] [2023-07-30T23:55:44.734Z] [runtime-status] [48547] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48547] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:55:44.736Z] [runtime-status] [48547] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48547] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:55:44.737Z] [runtime-status] [48547] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48547] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:55:44.739Z] [runtime-status] [48547] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48547] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:55:44.772Z] [runtime-status] [48553] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48553] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:55:44.774Z] [runtime-status] [48553] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48553] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:55:44.776Z] [runtime-status] [48553] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48553] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:55:44.777Z] [runtime-status] [48553] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48553] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:55:45.044Z] [runtime-status] [48547] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48547] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:55:45.044Z] [runtime-status] [48547] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48547] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:55:45.045Z] [runtime-status] [48547] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48547] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:55:45.047Z] [runtime-status] [48547] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48547] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:55:45.049Z] [runtime-status] [48547] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48547] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:55:45.050Z] [runtime-status] [48547] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48547] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:55:45.071Z] [runtime-status] [48553] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48553] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:55:45.071Z] [runtime-status] [48553] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48553] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:55:45.073Z] [runtime-status] [48553] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48553] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:55:45.075Z] [runtime-status] [48553] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48553] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:55:45.077Z] [runtime-status] [48553] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48553] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:55:45.077Z] [runtime-status] [48553] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48553] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:55:45.205Z] [runtime-status] [48547] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48547] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:55:45.206Z] [runtime-status] [48547] Listening to port: /tmp/fire_emu_91e986b036e8096a.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48547] Listening to port: /tmp/fire_emu_91e986b036e8096a.sock"}}
[debug] [2023-07-30T23:55:45.235Z] [runtime-status] [48553] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48553] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:55:45.236Z] [runtime-status] [48553] Listening to port: /tmp/fire_emu_a4ae3decff10369f.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48553] Listening to port: /tmp/fire_emu_a4ae3decff10369f.sock"}}
[debug] [2023-07-30T23:55:45.247Z] [worker-us-central1-api-df422af4-f074-4d61-9ea9-782855fa4480]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-df422af4-f074-4d61-9ea9-782855fa4480]: IDLE"}}
[debug] [2023-07-30T23:55:45.247Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:55:45.248Z] [worker-us-central1-api-df422af4-f074-4d61-9ea9-782855fa4480]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-df422af4-f074-4d61-9ea9-782855fa4480]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[debug] [2023-07-30T23:55:45.269Z] [worker-us-central1-api-70e32ee1-b5b4-4673-b4ea-6921aa9144e5]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-70e32ee1-b5b4-4673-b4ea-6921aa9144e5]: IDLE"}}
[debug] [2023-07-30T23:55:45.270Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:55:45.271Z] [worker-us-central1-api-70e32ee1-b5b4-4673-b4ea-6921aa9144e5]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-70e32ee1-b5b4-4673-b4ea-6921aa9144e5]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  node:internal/process/promises:288 {"user":"node:internal/process/promises:288","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/process/promises:288"}}
[info] >              triggerUncaughtException(err, true /* fromPromise */); {"user":"            triggerUncaughtException(err, true /* fromPromise */);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             triggerUncaughtException(err, true /* fromPromise */);"}}
[info] >              ^ {"user":"            ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             ^"}}
[info] >  Error: Invalid currency: rupees. Stripe currently supports these currencies: usd, aed, afn, all, amd, ang, aoa, ars, aud, awg, azn, bam, bbd, bdt, bgn, bhd, bif, bmd, bnd, bob, brl, bsd, bwp, byn, bzd, cad, cdf, chf, clp, cny, cop, crc, cve, czk, djf, dkk, dop, dzd, egp, etb, eur, fjd, fkp, gbp, gel, gip, gmd, gnf, gtq, gyd, hkd, hnl, hrk, htg, huf, idr, ils, inr, isk, jmd, jod, jpy, kes, kgs, khr, kmf, krw, kwd, kyd, kzt, lak, lbp, lkr, lrd, lsl, mad, mdl, mga, mkd, mmk, mnt, mop, mro, mur, mvr, mwk, mxn, myr, mzn, nad, ngn, nio, nok, npr, nzd, omr, pab, pen, pgk, php, pkr, pln, pyg, qar, ron, rsd, rub, rwf, sar, sbd, scr, sek, sgd, shp, sle, sos, srd, std, szl, thb, tjs, tnd, top, try, ttd, twd, tzs, uah, ugx, uyu, uzs, vnd, vuv, wst, xaf, xcd, xof, xpf, yer, zar, zmw, usdc, btn, ghs, eek, lvl, svc, vef, ltl, sll {"user":"Error: Invalid currency: rupees. Stripe currently supports these currencies: usd, aed, afn, all, amd, ang, aoa, ars, aud, awg, azn, bam, bbd, bdt, bgn, bhd, bif, bmd, bnd, bob, brl, bsd, bwp, byn, bzd, cad, cdf, chf, clp, cny, cop, crc, cve, czk, djf, dkk, dop, dzd, egp, etb, eur, fjd, fkp, gbp, gel, gip, gmd, gnf, gtq, gyd, hkd, hnl, hrk, htg, huf, idr, ils, inr, isk, jmd, jod, jpy, kes, kgs, khr, kmf, krw, kwd, kyd, kzt, lak, lbp, lkr, lrd, lsl, mad, mdl, mga, mkd, mmk, mnt, mop, mro, mur, mvr, mwk, mxn, myr, mzn, nad, ngn, nio, nok, npr, nzd, omr, pab, pen, pgk, php, pkr, pln, pyg, qar, ron, rsd, rub, rwf, sar, sbd, scr, sek, sgd, shp, sle, sos, srd, std, szl, thb, tjs, tnd, top, try, ttd, twd, tzs, uah, ugx, uyu, uzs, vnd, vuv, wst, xaf, xcd, xof, xpf, yer, zar, zmw, usdc, btn, ghs, eek, lvl, svc, vef, ltl, sll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error: Invalid currency: rupees. Stripe currently supports these currencies: usd, aed, afn, all, amd, ang, aoa, ars, aud, awg, azn, bam, bbd, bdt, bgn, bhd, bif, bmd, bnd, bob, brl, bsd, bwp, byn, bzd, cad, cdf, chf, clp, cny, cop, crc, cve, czk, djf, dkk, dop, dzd, egp, etb, eur, fjd, fkp, gbp, gel, gip, gmd, gnf, gtq, gyd, hkd, hnl, hrk, htg, huf, idr, ils, inr, isk, jmd, jod, jpy, kes, kgs, khr, kmf, krw, kwd, kyd, kzt, lak, lbp, lkr, lrd, lsl, mad, mdl, mga, mkd, mmk, mnt, mop, mro, mur, mvr, mwk, mxn, myr, mzn, nad, ngn, nio, nok, npr, nzd, omr, pab, pen, pgk, php, pkr, pln, pyg, qar, ron, rsd, rub, rwf, sar, sbd, scr, sek, sgd, shp, sle, sos, srd, std, szl, thb, tjs, tnd, top, try, ttd, twd, tzs, uah, ugx, uyu, uzs, vnd, vuv, wst, xaf, xcd, xof, xpf, yer, zar, zmw, usdc, btn, ghs, eek, lvl, svc, vef, ltl, sll"}}
[info] >      at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16) {"user":"    at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)"}}
[info] >      at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14) {"user":"    at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)"}}
[info] >      at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39) {"user":"    at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)"}}
[info] >      at IncomingMessage.emit (node:events:526:35) {"user":"    at IncomingMessage.emit (node:events:526:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:526:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1359:12) {"user":"    at endReadableNT (node:internal/streams/readable:1359:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1359:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:82:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: undefined, {"user":"  code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: undefined,"}}
[info] >    param: 'currency', {"user":"  param: 'currency',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'currency',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      message: 'Invalid currency: rupees. Stripe currently supports these currencies: usd, aed, afn, all, amd, ang, aoa, ars, aud, awg, azn, bam, bbd, bdt, bgn, bhd, bif, bmd, bnd, bob, brl, bsd, bwp, byn, bzd, cad, cdf, chf, clp, cny, cop, crc, cve, czk, djf, dkk, dop, dzd, egp, etb, eur, fjd, fkp, gbp, gel, gip, gmd, gnf, gtq, gyd, hkd, hnl, hrk, htg, huf, idr, ils, inr, isk, jmd, jod, jpy, kes, kgs, khr, kmf, krw, kwd, kyd, kzt, lak, lbp, lkr, lrd, lsl, mad, mdl, mga, mkd, mmk, mnt, mop, mro, mur, mvr, mwk, mxn, myr, mzn, nad, ngn, nio, nok, npr, nzd, omr, pab, pen, pgk, php, pkr, pln, pyg, qar, ron, rsd, rub, rwf, sar, sbd, scr, sek, sgd, shp, sle, sos, srd, std, szl, thb, tjs, tnd, top, try, ttd, twd, tzs, uah, ugx, uyu, uzs, vnd, vuv, wst, xaf, xcd, xof, xpf, yer, zar, zmw, usdc, btn, ghs, eek, lvl, svc, vef, ltl, sll', {"user":"    message: 'Invalid currency: rupees. Stripe currently supports these currencies: usd, aed, afn, all, amd, ang, aoa, ars, aud, awg, azn, bam, bbd, bdt, bgn, bhd, bif, bmd, bnd, bob, brl, bsd, bwp, byn, bzd, cad, cdf, chf, clp, cny, cop, crc, cve, czk, djf, dkk, dop, dzd, egp, etb, eur, fjd, fkp, gbp, gel, gip, gmd, gnf, gtq, gyd, hkd, hnl, hrk, htg, huf, idr, ils, inr, isk, jmd, jod, jpy, kes, kgs, khr, kmf, krw, kwd, kyd, kzt, lak, lbp, lkr, lrd, lsl, mad, mdl, mga, mkd, mmk, mnt, mop, mro, mur, mvr, mwk, mxn, myr, mzn, nad, ngn, nio, nok, npr, nzd, omr, pab, pen, pgk, php, pkr, pln, pyg, qar, ron, rsd, rub, rwf, sar, sbd, scr, sek, sgd, shp, sle, sos, srd, std, szl, thb, tjs, tnd, top, try, ttd, twd, tzs, uah, ugx, uyu, uzs, vnd, vuv, wst, xaf, xcd, xof, xpf, yer, zar, zmw, usdc, btn, ghs, eek, lvl, svc, vef, ltl, sll',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Invalid currency: rupees. Stripe currently supports these currencies: usd, aed, afn, all, amd, ang, aoa, ars, aud, awg, azn, bam, bbd, bdt, bgn, bhd, bif, bmd, bnd, bob, brl, bsd, bwp, byn, bzd, cad, cdf, chf, clp, cny, cop, crc, cve, czk, djf, dkk, dop, dzd, egp, etb, eur, fjd, fkp, gbp, gel, gip, gmd, gnf, gtq, gyd, hkd, hnl, hrk, htg, huf, idr, ils, inr, isk, jmd, jod, jpy, kes, kgs, khr, kmf, krw, kwd, kyd, kzt, lak, lbp, lkr, lrd, lsl, mad, mdl, mga, mkd, mmk, mnt, mop, mro, mur, mvr, mwk, mxn, myr, mzn, nad, ngn, nio, nok, npr, nzd, omr, pab, pen, pgk, php, pkr, pln, pyg, qar, ron, rsd, rub, rwf, sar, sbd, scr, sek, sgd, shp, sle, sos, srd, std, szl, thb, tjs, tnd, top, try, ttd, twd, tzs, uah, ugx, uyu, uzs, vnd, vuv, wst, xaf, xcd, xof, xpf, yer, zar, zmw, usdc, btn, ghs, eek, lvl, svc, vef, ltl, sll',"}}
[info] >      param: 'currency', {"user":"    param: 'currency',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'currency',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_jLvy9Fh3ozIO0K?t=1690761346', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_jLvy9Fh3ozIO0K?t=1690761346',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_jLvy9Fh3ozIO0K?t=1690761346',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Sun, 30 Jul 2023 23:55:46 GMT', {"user":"      date: 'Sun, 30 Jul 2023 23:55:46 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Sun, 30 Jul 2023 23:55:46 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '1017', {"user":"      'content-length': '1017',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '1017',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'idempotency-key': 'f129c18d-143d-44ab-a823-018fe047a73b', {"user":"      'idempotency-key': 'f129c18d-143d-44ab-a823-018fe047a73b',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': 'f129c18d-143d-44ab-a823-018fe047a73b',"}}
[info] >        'original-request': 'req_jLvy9Fh3ozIO0K', {"user":"      'original-request': 'req_jLvy9Fh3ozIO0K',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_jLvy9Fh3ozIO0K',"}}
[info] >        'request-id': 'req_jLvy9Fh3ozIO0K', {"user":"      'request-id': 'req_jLvy9Fh3ozIO0K',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_jLvy9Fh3ozIO0K',"}}
[info] >        'stripe-version': '2022-11-15', {"user":"      'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2022-11-15',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_jLvy9Fh3ozIO0K' {"user":"    requestId: 'req_jLvy9Fh3ozIO0K'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_jLvy9Fh3ozIO0K'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Sun, 30 Jul 2023 23:55:46 GMT', {"user":"    date: 'Sun, 30 Jul 2023 23:55:46 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Sun, 30 Jul 2023 23:55:46 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '1017', {"user":"    'content-length': '1017',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '1017',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'idempotency-key': 'f129c18d-143d-44ab-a823-018fe047a73b', {"user":"    'idempotency-key': 'f129c18d-143d-44ab-a823-018fe047a73b',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': 'f129c18d-143d-44ab-a823-018fe047a73b',"}}
[info] >      'original-request': 'req_jLvy9Fh3ozIO0K', {"user":"    'original-request': 'req_jLvy9Fh3ozIO0K',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_jLvy9Fh3ozIO0K',"}}
[info] >      'request-id': 'req_jLvy9Fh3ozIO0K', {"user":"    'request-id': 'req_jLvy9Fh3ozIO0K',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_jLvy9Fh3ozIO0K',"}}
[info] >      'stripe-version': '2022-11-15', {"user":"    'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2022-11-15',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_jLvy9Fh3ozIO0K', {"user":"  requestId: 'req_jLvy9Fh3ozIO0K',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_jLvy9Fh3ozIO0K',"}}
[info] >    statusCode: 400 {"user":"  statusCode: 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:55:46.272Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:55:43.292Z"],"workRunningCount":1}
[debug] [2023-07-30T23:55:46.273Z] [worker-us-central1-api-70e32ee1-b5b4-4673-b4ea-6921aa9144e5]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-70e32ee1-b5b4-4673-b4ea-6921aa9144e5]: exited"}}
[debug] [2023-07-30T23:55:46.273Z] [worker-us-central1-api-70e32ee1-b5b4-4673-b4ea-6921aa9144e5]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-70e32ee1-b5b4-4673-b4ea-6921aa9144e5]: FINISHED"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  node:internal/process/promises:288 {"user":"node:internal/process/promises:288","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m node:internal/process/promises:288"}}
[info] >              triggerUncaughtException(err, true /* fromPromise */); {"user":"            triggerUncaughtException(err, true /* fromPromise */);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             triggerUncaughtException(err, true /* fromPromise */);"}}
[info] >              ^ {"user":"            ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m             ^"}}
[info] >  Error: Invalid currency: rupees. Stripe currently supports these currencies: usd, aed, afn, all, amd, ang, aoa, ars, aud, awg, azn, bam, bbd, bdt, bgn, bhd, bif, bmd, bnd, bob, brl, bsd, bwp, byn, bzd, cad, cdf, chf, clp, cny, cop, crc, cve, czk, djf, dkk, dop, dzd, egp, etb, eur, fjd, fkp, gbp, gel, gip, gmd, gnf, gtq, gyd, hkd, hnl, hrk, htg, huf, idr, ils, inr, isk, jmd, jod, jpy, kes, kgs, khr, kmf, krw, kwd, kyd, kzt, lak, lbp, lkr, lrd, lsl, mad, mdl, mga, mkd, mmk, mnt, mop, mro, mur, mvr, mwk, mxn, myr, mzn, nad, ngn, nio, nok, npr, nzd, omr, pab, pen, pgk, php, pkr, pln, pyg, qar, ron, rsd, rub, rwf, sar, sbd, scr, sek, sgd, shp, sle, sos, srd, std, szl, thb, tjs, tnd, top, try, ttd, twd, tzs, uah, ugx, uyu, uzs, vnd, vuv, wst, xaf, xcd, xof, xpf, yer, zar, zmw, usdc, btn, ghs, eek, lvl, svc, vef, ltl, sll {"user":"Error: Invalid currency: rupees. Stripe currently supports these currencies: usd, aed, afn, all, amd, ang, aoa, ars, aud, awg, azn, bam, bbd, bdt, bgn, bhd, bif, bmd, bnd, bob, brl, bsd, bwp, byn, bzd, cad, cdf, chf, clp, cny, cop, crc, cve, czk, djf, dkk, dop, dzd, egp, etb, eur, fjd, fkp, gbp, gel, gip, gmd, gnf, gtq, gyd, hkd, hnl, hrk, htg, huf, idr, ils, inr, isk, jmd, jod, jpy, kes, kgs, khr, kmf, krw, kwd, kyd, kzt, lak, lbp, lkr, lrd, lsl, mad, mdl, mga, mkd, mmk, mnt, mop, mro, mur, mvr, mwk, mxn, myr, mzn, nad, ngn, nio, nok, npr, nzd, omr, pab, pen, pgk, php, pkr, pln, pyg, qar, ron, rsd, rub, rwf, sar, sbd, scr, sek, sgd, shp, sle, sos, srd, std, szl, thb, tjs, tnd, top, try, ttd, twd, tzs, uah, ugx, uyu, uzs, vnd, vuv, wst, xaf, xcd, xof, xpf, yer, zar, zmw, usdc, btn, ghs, eek, lvl, svc, vef, ltl, sll","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Error: Invalid currency: rupees. Stripe currently supports these currencies: usd, aed, afn, all, amd, ang, aoa, ars, aud, awg, azn, bam, bbd, bdt, bgn, bhd, bif, bmd, bnd, bob, brl, bsd, bwp, byn, bzd, cad, cdf, chf, clp, cny, cop, crc, cve, czk, djf, dkk, dop, dzd, egp, etb, eur, fjd, fkp, gbp, gel, gip, gmd, gnf, gtq, gyd, hkd, hnl, hrk, htg, huf, idr, ils, inr, isk, jmd, jod, jpy, kes, kgs, khr, kmf, krw, kwd, kyd, kzt, lak, lbp, lkr, lrd, lsl, mad, mdl, mga, mkd, mmk, mnt, mop, mro, mur, mvr, mwk, mxn, myr, mzn, nad, ngn, nio, nok, npr, nzd, omr, pab, pen, pgk, php, pkr, pln, pyg, qar, ron, rsd, rub, rwf, sar, sbd, scr, sek, sgd, shp, sle, sos, srd, std, szl, thb, tjs, tnd, top, try, ttd, twd, tzs, uah, ugx, uyu, uzs, vnd, vuv, wst, xaf, xcd, xof, xpf, yer, zar, zmw, usdc, btn, ghs, eek, lvl, svc, vef, ltl, sll"}}
[info] >      at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16) {"user":"    at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor._Error (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:12:16)"}}
[info] >      at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17) {"user":"    at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new Constructor (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/utils.js:164:17)"}}
[info] >      at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14) {"user":"    at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/Error.js:57:14)"}}
[info] >      at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39) {"user":"    at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/home/aeturi/amazon-clone/functions/node_modules/stripe/lib/StripeResource.js:165:39)"}}
[info] >      at IncomingMessage.emit (node:events:526:35) {"user":"    at IncomingMessage.emit (node:events:526:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:526:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1359:12) {"user":"    at endReadableNT (node:internal/streams/readable:1359:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1359:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:82:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: undefined, {"user":"  code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: undefined,"}}
[info] >    param: 'currency', {"user":"  param: 'currency',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'currency',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      message: 'Invalid currency: rupees. Stripe currently supports these currencies: usd, aed, afn, all, amd, ang, aoa, ars, aud, awg, azn, bam, bbd, bdt, bgn, bhd, bif, bmd, bnd, bob, brl, bsd, bwp, byn, bzd, cad, cdf, chf, clp, cny, cop, crc, cve, czk, djf, dkk, dop, dzd, egp, etb, eur, fjd, fkp, gbp, gel, gip, gmd, gnf, gtq, gyd, hkd, hnl, hrk, htg, huf, idr, ils, inr, isk, jmd, jod, jpy, kes, kgs, khr, kmf, krw, kwd, kyd, kzt, lak, lbp, lkr, lrd, lsl, mad, mdl, mga, mkd, mmk, mnt, mop, mro, mur, mvr, mwk, mxn, myr, mzn, nad, ngn, nio, nok, npr, nzd, omr, pab, pen, pgk, php, pkr, pln, pyg, qar, ron, rsd, rub, rwf, sar, sbd, scr, sek, sgd, shp, sle, sos, srd, std, szl, thb, tjs, tnd, top, try, ttd, twd, tzs, uah, ugx, uyu, uzs, vnd, vuv, wst, xaf, xcd, xof, xpf, yer, zar, zmw, usdc, btn, ghs, eek, lvl, svc, vef, ltl, sll', {"user":"    message: 'Invalid currency: rupees. Stripe currently supports these currencies: usd, aed, afn, all, amd, ang, aoa, ars, aud, awg, azn, bam, bbd, bdt, bgn, bhd, bif, bmd, bnd, bob, brl, bsd, bwp, byn, bzd, cad, cdf, chf, clp, cny, cop, crc, cve, czk, djf, dkk, dop, dzd, egp, etb, eur, fjd, fkp, gbp, gel, gip, gmd, gnf, gtq, gyd, hkd, hnl, hrk, htg, huf, idr, ils, inr, isk, jmd, jod, jpy, kes, kgs, khr, kmf, krw, kwd, kyd, kzt, lak, lbp, lkr, lrd, lsl, mad, mdl, mga, mkd, mmk, mnt, mop, mro, mur, mvr, mwk, mxn, myr, mzn, nad, ngn, nio, nok, npr, nzd, omr, pab, pen, pgk, php, pkr, pln, pyg, qar, ron, rsd, rub, rwf, sar, sbd, scr, sek, sgd, shp, sle, sos, srd, std, szl, thb, tjs, tnd, top, try, ttd, twd, tzs, uah, ugx, uyu, uzs, vnd, vuv, wst, xaf, xcd, xof, xpf, yer, zar, zmw, usdc, btn, ghs, eek, lvl, svc, vef, ltl, sll',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Invalid currency: rupees. Stripe currently supports these currencies: usd, aed, afn, all, amd, ang, aoa, ars, aud, awg, azn, bam, bbd, bdt, bgn, bhd, bif, bmd, bnd, bob, brl, bsd, bwp, byn, bzd, cad, cdf, chf, clp, cny, cop, crc, cve, czk, djf, dkk, dop, dzd, egp, etb, eur, fjd, fkp, gbp, gel, gip, gmd, gnf, gtq, gyd, hkd, hnl, hrk, htg, huf, idr, ils, inr, isk, jmd, jod, jpy, kes, kgs, khr, kmf, krw, kwd, kyd, kzt, lak, lbp, lkr, lrd, lsl, mad, mdl, mga, mkd, mmk, mnt, mop, mro, mur, mvr, mwk, mxn, myr, mzn, nad, ngn, nio, nok, npr, nzd, omr, pab, pen, pgk, php, pkr, pln, pyg, qar, ron, rsd, rub, rwf, sar, sbd, scr, sek, sgd, shp, sle, sos, srd, std, szl, thb, tjs, tnd, top, try, ttd, twd, tzs, uah, ugx, uyu, uzs, vnd, vuv, wst, xaf, xcd, xof, xpf, yer, zar, zmw, usdc, btn, ghs, eek, lvl, svc, vef, ltl, sll',"}}
[info] >      param: 'currency', {"user":"    param: 'currency',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'currency',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_DIrD45fyy96qLX?t=1690761346', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_DIrD45fyy96qLX?t=1690761346',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_DIrD45fyy96qLX?t=1690761346',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Sun, 30 Jul 2023 23:55:46 GMT', {"user":"      date: 'Sun, 30 Jul 2023 23:55:46 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Sun, 30 Jul 2023 23:55:46 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '1017', {"user":"      'content-length': '1017',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '1017',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'idempotency-key': '3f25716d-a3ed-4cb6-b5c7-72b0bffeaee8', {"user":"      'idempotency-key': '3f25716d-a3ed-4cb6-b5c7-72b0bffeaee8',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '3f25716d-a3ed-4cb6-b5c7-72b0bffeaee8',"}}
[info] >        'original-request': 'req_DIrD45fyy96qLX', {"user":"      'original-request': 'req_DIrD45fyy96qLX',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_DIrD45fyy96qLX',"}}
[info] >        'request-id': 'req_DIrD45fyy96qLX', {"user":"      'request-id': 'req_DIrD45fyy96qLX',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_DIrD45fyy96qLX',"}}
[info] >        'stripe-version': '2022-11-15', {"user":"      'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2022-11-15',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_DIrD45fyy96qLX' {"user":"    requestId: 'req_DIrD45fyy96qLX'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_DIrD45fyy96qLX'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Sun, 30 Jul 2023 23:55:46 GMT', {"user":"    date: 'Sun, 30 Jul 2023 23:55:46 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Sun, 30 Jul 2023 23:55:46 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '1017', {"user":"    'content-length': '1017',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '1017',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'idempotency-key': '3f25716d-a3ed-4cb6-b5c7-72b0bffeaee8', {"user":"    'idempotency-key': '3f25716d-a3ed-4cb6-b5c7-72b0bffeaee8',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '3f25716d-a3ed-4cb6-b5c7-72b0bffeaee8',"}}
[info] >      'original-request': 'req_DIrD45fyy96qLX', {"user":"    'original-request': 'req_DIrD45fyy96qLX',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_DIrD45fyy96qLX',"}}
[info] >      'request-id': 'req_DIrD45fyy96qLX', {"user":"    'request-id': 'req_DIrD45fyy96qLX',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_DIrD45fyy96qLX',"}}
[info] >      'stripe-version': '2022-11-15', {"user":"    'stripe-version': '2022-11-15',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2022-11-15',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_DIrD45fyy96qLX', {"user":"  requestId: 'req_DIrD45fyy96qLX',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_DIrD45fyy96qLX',"}}
[info] >    statusCode: 400 {"user":"  statusCode: 400","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v18.17.0 {"user":"Node.js v18.17.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v18.17.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2023-07-30T23:55:46.420Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:55:46.420Z] [worker-us-central1-api-df422af4-f074-4d61-9ea9-782855fa4480]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-df422af4-f074-4d61-9ea9-782855fa4480]: exited"}}
[debug] [2023-07-30T23:55:46.421Z] [worker-us-central1-api-df422af4-f074-4d61-9ea9-782855fa4480]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-df422af4-f074-4d61-9ea9-782855fa4480]: FINISHED"}}
[debug] [2023-07-30T23:57:17.653Z] File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers"}}
[debug] [2023-07-30T23:57:18.654Z] Validating nodejs source
[debug] [2023-07-30T23:57:21.198Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "stripe": "^7.4.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2023-07-30T23:57:21.199Z] Building nodejs source
[debug] [2023-07-30T23:57:21.199Z] Failed to find version of module node: reached end of search path /home/aeturi/amazon-clone/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-07-30T23:57:21.200Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-07-30T23:57:21.202Z] Found firebase-functions binary at '/home/aeturi/amazon-clone/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8559

[debug] [2023-07-30T23:57:21.822Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2023-07-30T23:57:29.988Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:57:29.988Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:57:29.988Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:57:29.988Z"],"workRunningCount":1}
[debug] [2023-07-30T23:57:29.988Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=598.99 --> us-central1-api
[debug] [2023-07-30T23:57:29.992Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:57:29.992Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=598.99, mapping to path=/payments/create?total=598.99 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=598.99, mapping to path=/payments/create?total=598.99"}}
[debug] [2023-07-30T23:57:29.992Z] [worker-pool] Cleaned up workers for us-central1-api: 2 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 2 --> 0"}}
[debug] [2023-07-30T23:57:30.006Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:57:30.006Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-07-30T23:57:30.009Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:57:30.009Z"],"queueLength":1,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:57:29.988Z"],"workRunningCount":1}
[debug] [2023-07-30T23:57:30.010Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:57:29.988Z","/clone-96e62/us-central1/api/payments/create-2023-07-30T23:57:30.009Z"],"workRunningCount":2}
[debug] [2023-07-30T23:57:30.010Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=598.99 --> us-central1-api
[debug] [2023-07-30T23:57:30.015Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-30T23:57:30.022Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=598.99, mapping to path=/payments/create?total=598.99 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=598.99, mapping to path=/payments/create?total=598.99"}}
[debug] [2023-07-30T23:57:30.037Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-30T23:57:30.038Z] [worker-pool] Adding worker with key us-central1-api, total=2 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=2"}}
[debug] [2023-07-30T23:57:31.473Z] [runtime-status] [48726] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48726] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:57:31.475Z] [runtime-status] [48726] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48726] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:57:31.476Z] [runtime-status] [48726] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48726] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:57:31.478Z] [runtime-status] [48726] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48726] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:57:31.482Z] [runtime-status] [48732] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48732] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:57:31.485Z] [runtime-status] [48732] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48732] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:57:31.485Z] [runtime-status] [48732] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48732] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-30T23:57:31.487Z] [runtime-status] [48732] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48732] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:57:31.795Z] [runtime-status] [48726] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48726] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:57:31.796Z] [runtime-status] [48726] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48726] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:57:31.797Z] [runtime-status] [48726] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48726] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:57:31.798Z] [runtime-status] [48726] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48726] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:57:31.801Z] [runtime-status] [48726] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48726] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:57:31.802Z] [runtime-status] [48726] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48726] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:57:31.821Z] [runtime-status] [48732] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48732] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-30T23:57:31.822Z] [runtime-status] [48732] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48732] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-30T23:57:31.824Z] [runtime-status] [48732] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48732] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:57:31.825Z] [runtime-status] [48732] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48732] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-30T23:57:31.829Z] [runtime-status] [48732] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48732] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-30T23:57:31.830Z] [runtime-status] [48732] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48732] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-30T23:57:31.971Z] [runtime-status] [48726] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48726] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:57:31.971Z] [runtime-status] [48726] Listening to port: /tmp/fire_emu_57eedc0c386570e6.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48726] Listening to port: /tmp/fire_emu_57eedc0c386570e6.sock"}}
[debug] [2023-07-30T23:57:31.991Z] [runtime-status] [48732] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48732] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-30T23:57:31.993Z] [runtime-status] [48732] Listening to port: /tmp/fire_emu_ab2569f1c5d4d671.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [48732] Listening to port: /tmp/fire_emu_ab2569f1c5d4d671.sock"}}
[debug] [2023-07-30T23:57:32.034Z] [worker-us-central1-api-e24058a9-2031-4c60-b1ad-888a338c33bf]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e24058a9-2031-4c60-b1ad-888a338c33bf]: IDLE"}}
[debug] [2023-07-30T23:57:32.034Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:57:32.035Z] [worker-us-central1-api-e24058a9-2031-4c60-b1ad-888a338c33bf]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e24058a9-2031-4c60-b1ad-888a338c33bf]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[debug] [2023-07-30T23:57:32.067Z] [worker-us-central1-api-ddf5bccb-b093-4d61-ad4d-1a1997827fba]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ddf5bccb-b093-4d61-ad4d-1a1997827fba]: IDLE"}}
[debug] [2023-07-30T23:57:32.067Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-30T23:57:32.068Z] [worker-us-central1-api-ddf5bccb-b093-4d61-ad4d-1a1997827fba]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ddf5bccb-b093-4d61-ad4d-1a1997827fba]: BUSY"}}
[info] >  Payment done {"user":"Payment done","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment done"}}
[info] >  hey {"user":"hey","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m hey"}}
[info] >  hey {"user":"hey","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m hey"}}
[debug] [2023-07-30T23:57:32.998Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 930.053131ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 930.053131ms"}}
[debug] [2023-07-30T23:57:32.999Z] [worker-us-central1-api-ddf5bccb-b093-4d61-ad4d-1a1997827fba]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ddf5bccb-b093-4d61-ad4d-1a1997827fba]: IDLE"}}
[debug] [2023-07-30T23:57:32.999Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-07-30T23:57:33.000Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-07-30T23:57:33.000Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-30T23:57:29.988Z"],"workRunningCount":1}
[debug] [2023-07-30T23:57:33.002Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 967.201536ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 967.201536ms"}}
[debug] [2023-07-30T23:57:33.002Z] [worker-us-central1-api-e24058a9-2031-4c60-b1ad-888a338c33bf]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e24058a9-2031-4c60-b1ad-888a338c33bf]: IDLE"}}
[debug] [2023-07-30T23:57:33.002Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-07-30T23:57:33.003Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-07-30T23:57:33.003Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-30T23:58:29.454Z] File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /home/aeturi/amazon-clone/functions/index.js changed, reloading triggers"}}
[debug] [2023-07-30T23:58:30.455Z] Validating nodejs source
[debug] [2023-07-30T23:58:32.836Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "stripe": "^7.4.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2023-07-30T23:58:32.837Z] Building nodejs source
[debug] [2023-07-30T23:58:32.837Z] Failed to find version of module node: reached end of search path /home/aeturi/amazon-clone/functions/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-07-30T23:58:32.839Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-07-30T23:58:32.841Z] Found firebase-functions binary at '/home/aeturi/amazon-clone/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8387

[debug] [2023-07-30T23:58:33.467Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[debug] [2023-07-30T23:58:33.485Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-07-30T23:58:33.485Z] [worker-us-central1-api-e24058a9-2031-4c60-b1ad-888a338c33bf]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e24058a9-2031-4c60-b1ad-888a338c33bf]: FINISHING"}}
[debug] [2023-07-30T23:58:33.485Z] [worker-pool] Shutting down IDLE worker (us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-api)"}}
[debug] [2023-07-30T23:58:33.485Z] [worker-us-central1-api-ddf5bccb-b093-4d61-ad4d-1a1997827fba]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ddf5bccb-b093-4d61-ad4d-1a1997827fba]: FINISHING"}}
[debug] [2023-07-30T23:58:33.496Z] [worker-us-central1-api-e24058a9-2031-4c60-b1ad-888a338c33bf]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e24058a9-2031-4c60-b1ad-888a338c33bf]: exited"}}
[debug] [2023-07-30T23:58:33.496Z] [worker-us-central1-api-e24058a9-2031-4c60-b1ad-888a338c33bf]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-e24058a9-2031-4c60-b1ad-888a338c33bf]: FINISHED"}}
[debug] [2023-07-30T23:58:33.496Z] [worker-us-central1-api-ddf5bccb-b093-4d61-ad4d-1a1997827fba]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ddf5bccb-b093-4d61-ad4d-1a1997827fba]: exited"}}
[debug] [2023-07-30T23:58:33.496Z] [worker-us-central1-api-ddf5bccb-b093-4d61-ad4d-1a1997827fba]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-ddf5bccb-b093-4d61-ad4d-1a1997827fba]: FINISHED"}}
[debug] [2023-07-31T00:02:17.627Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:02:17.627Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-31T00:02:17.627Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:02:17.627Z"],"workRunningCount":1}
[debug] [2023-07-31T00:02:17.627Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=9899 --> us-central1-api
[debug] [2023-07-31T00:02:17.631Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-31T00:02:17.632Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=9899, mapping to path=/payments/create?total=9899 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=9899, mapping to path=/payments/create?total=9899"}}
[debug] [2023-07-31T00:02:17.632Z] [worker-pool] Cleaned up workers for us-central1-api: 2 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 2 --> 0"}}
[debug] [2023-07-31T00:02:17.699Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-31T00:02:17.700Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[debug] [2023-07-31T00:02:17.705Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:02:17.705Z"],"queueLength":1,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:02:17.627Z"],"workRunningCount":1}
[debug] [2023-07-31T00:02:17.705Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:02:17.627Z","/clone-96e62/us-central1/api/payments/create-2023-07-31T00:02:17.705Z"],"workRunningCount":2}
[debug] [2023-07-31T00:02:17.706Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=9899 --> us-central1-api
[debug] [2023-07-31T00:02:17.710Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-31T00:02:17.711Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=9899, mapping to path=/payments/create?total=9899 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=9899, mapping to path=/payments/create?total=9899"}}
[debug] [2023-07-31T00:02:17.729Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2023-07-31T00:02:17.730Z] [worker-pool] Adding worker with key us-central1-api, total=2 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=2"}}
[debug] [2023-07-31T00:02:19.298Z] [runtime-status] [49064] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49064] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-31T00:02:19.300Z] [runtime-status] [49064] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49064] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-31T00:02:19.301Z] [runtime-status] [49064] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49064] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-31T00:02:19.302Z] [runtime-status] [49064] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49064] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-31T00:02:19.335Z] [runtime-status] [49058] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49058] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-31T00:02:19.337Z] [runtime-status] [49058] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49058] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-31T00:02:19.339Z] [runtime-status] [49058] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49058] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-07-31T00:02:19.340Z] [runtime-status] [49058] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49058] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-31T00:02:19.593Z] [runtime-status] [49064] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49064] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-31T00:02:19.593Z] [runtime-status] [49064] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49064] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-31T00:02:19.595Z] [runtime-status] [49064] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49064] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-31T00:02:19.596Z] [runtime-status] [49064] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49064] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-31T00:02:19.599Z] [runtime-status] [49064] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49064] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-31T00:02:19.599Z] [runtime-status] [49064] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49064] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-31T00:02:19.635Z] [runtime-status] [49058] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49058] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-07-31T00:02:19.636Z] [runtime-status] [49058] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49058] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-07-31T00:02:19.637Z] [runtime-status] [49058] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49058] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-31T00:02:19.639Z] [runtime-status] [49058] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49058] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-07-31T00:02:19.641Z] [runtime-status] [49058] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.4.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49058] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.4.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-07-31T00:02:19.642Z] [runtime-status] [49058] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.10.1","resolution":"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49058] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.10.1\",\"resolution\":\"/home/aeturi/amazon-clone/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-07-31T00:02:19.775Z] [runtime-status] [49064] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49064] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-31T00:02:19.775Z] [runtime-status] [49064] Listening to port: /tmp/fire_emu_5e704ef2d6ed5e9a.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49064] Listening to port: /tmp/fire_emu_5e704ef2d6ed5e9a.sock"}}
[debug] [2023-07-31T00:02:19.802Z] [runtime-status] [49058] Functions runtime initialized. {"cwd":"/home/aeturi/amazon-clone/functions","node_version":"18.17.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49058] Functions runtime initialized. {\"cwd\":\"/home/aeturi/amazon-clone/functions\",\"node_version\":\"18.17.0\"}"}}
[debug] [2023-07-31T00:02:19.803Z] [runtime-status] [49058] Listening to port: /tmp/fire_emu_26f799f3bec565df.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [49058] Listening to port: /tmp/fire_emu_26f799f3bec565df.sock"}}
[debug] [2023-07-31T00:02:19.838Z] [worker-us-central1-api-1372b8b0-7220-4fd3-aecb-a480889823c0]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1372b8b0-7220-4fd3-aecb-a480889823c0]: IDLE"}}
[debug] [2023-07-31T00:02:19.838Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-31T00:02:19.839Z] [worker-us-central1-api-1372b8b0-7220-4fd3-aecb-a480889823c0]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1372b8b0-7220-4fd3-aecb-a480889823c0]: BUSY"}}
[debug] [2023-07-31T00:02:19.860Z] [worker-us-central1-api-3053de22-e0e7-483b-9d22-1b08e7e9156d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3053de22-e0e7-483b-9d22-1b08e7e9156d]: IDLE"}}
[debug] [2023-07-31T00:02:19.861Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-31T00:02:19.861Z] [worker-us-central1-api-3053de22-e0e7-483b-9d22-1b08e7e9156d]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3053de22-e0e7-483b-9d22-1b08e7e9156d]: BUSY"}}
[debug] [2023-07-31T00:02:20.742Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 881.213574ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 881.213574ms"}}
[debug] [2023-07-31T00:02:20.744Z] [worker-us-central1-api-3053de22-e0e7-483b-9d22-1b08e7e9156d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3053de22-e0e7-483b-9d22-1b08e7e9156d]: IDLE"}}
[debug] [2023-07-31T00:02:20.744Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-07-31T00:02:20.745Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-07-31T00:02:20.745Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:02:17.627Z"],"workRunningCount":1}
[debug] [2023-07-31T00:02:20.750Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 911.94389ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 911.94389ms"}}
[debug] [2023-07-31T00:02:20.752Z] [worker-us-central1-api-1372b8b0-7220-4fd3-aecb-a480889823c0]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1372b8b0-7220-4fd3-aecb-a480889823c0]: IDLE"}}
[debug] [2023-07-31T00:02:20.752Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-07-31T00:02:20.753Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-07-31T00:02:20.753Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-31T00:05:33.784Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:05:33.784Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-31T00:05:33.785Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:05:33.784Z"],"workRunningCount":1}
[debug] [2023-07-31T00:05:33.785Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=9899 --> us-central1-api
[debug] [2023-07-31T00:05:33.789Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-31T00:05:33.790Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=9899, mapping to path=/payments/create?total=9899 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=9899, mapping to path=/payments/create?total=9899"}}
[debug] [2023-07-31T00:05:33.790Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-31T00:05:33.790Z] [worker-us-central1-api-1372b8b0-7220-4fd3-aecb-a480889823c0]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1372b8b0-7220-4fd3-aecb-a480889823c0]: BUSY"}}
[debug] [2023-07-31T00:05:33.793Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:05:33.793Z"],"queueLength":1,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:05:33.784Z"],"workRunningCount":1}
[debug] [2023-07-31T00:05:33.794Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:05:33.784Z","/clone-96e62/us-central1/api/payments/create-2023-07-31T00:05:33.793Z"],"workRunningCount":2}
[debug] [2023-07-31T00:05:33.794Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=9899 --> us-central1-api
[debug] [2023-07-31T00:05:33.798Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-31T00:05:33.798Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=9899, mapping to path=/payments/create?total=9899 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=9899, mapping to path=/payments/create?total=9899"}}
[debug] [2023-07-31T00:05:33.798Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-31T00:05:33.799Z] [worker-us-central1-api-3053de22-e0e7-483b-9d22-1b08e7e9156d]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3053de22-e0e7-483b-9d22-1b08e7e9156d]: BUSY"}}
[debug] [2023-07-31T00:05:34.414Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 623.418001ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 623.418001ms"}}
[debug] [2023-07-31T00:05:34.414Z] [worker-us-central1-api-1372b8b0-7220-4fd3-aecb-a480889823c0]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1372b8b0-7220-4fd3-aecb-a480889823c0]: IDLE"}}
[debug] [2023-07-31T00:05:34.415Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-07-31T00:05:34.415Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-07-31T00:05:34.415Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:05:33.793Z"],"workRunningCount":1}
[debug] [2023-07-31T00:05:34.438Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 639.03934ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 639.03934ms"}}
[debug] [2023-07-31T00:05:34.439Z] [worker-us-central1-api-3053de22-e0e7-483b-9d22-1b08e7e9156d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3053de22-e0e7-483b-9d22-1b08e7e9156d]: IDLE"}}
[debug] [2023-07-31T00:05:34.439Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-07-31T00:05:34.439Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-07-31T00:05:34.439Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-31T00:07:12.180Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:07:12.180Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-07-31T00:07:12.180Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:07:12.180Z"],"workRunningCount":1}
[debug] [2023-07-31T00:07:12.180Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=1196 --> us-central1-api
[debug] [2023-07-31T00:07:12.184Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-31T00:07:12.185Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=1196, mapping to path=/payments/create?total=1196 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=1196, mapping to path=/payments/create?total=1196"}}
[debug] [2023-07-31T00:07:12.185Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-31T00:07:12.185Z] [worker-us-central1-api-1372b8b0-7220-4fd3-aecb-a480889823c0]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1372b8b0-7220-4fd3-aecb-a480889823c0]: BUSY"}}
[debug] [2023-07-31T00:07:12.191Z] [work-queue] {"queuedWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:07:12.191Z"],"queueLength":1,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:07:12.180Z"],"workRunningCount":1}
[debug] [2023-07-31T00:07:12.191Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:07:12.180Z","/clone-96e62/us-central1/api/payments/create-2023-07-31T00:07:12.191Z"],"workRunningCount":2}
[debug] [2023-07-31T00:07:12.191Z] Accepted request POST /clone-96e62/us-central1/api/payments/create?total=1196 --> us-central1-api
[debug] [2023-07-31T00:07:12.196Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-07-31T00:07:12.196Z] [functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=1196, mapping to path=/payments/create?total=1196 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-96e62/us-central1/api/payments/create?total=1196, mapping to path=/payments/create?total=1196"}}
[debug] [2023-07-31T00:07:12.196Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2023-07-31T00:07:12.197Z] [worker-us-central1-api-3053de22-e0e7-483b-9d22-1b08e7e9156d]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3053de22-e0e7-483b-9d22-1b08e7e9156d]: BUSY"}}
[debug] [2023-07-31T00:07:12.982Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 785.42385ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 785.42385ms"}}
[debug] [2023-07-31T00:07:12.984Z] [worker-us-central1-api-3053de22-e0e7-483b-9d22-1b08e7e9156d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-3053de22-e0e7-483b-9d22-1b08e7e9156d]: IDLE"}}
[debug] [2023-07-31T00:07:12.984Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-07-31T00:07:12.985Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-07-31T00:07:12.985Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-96e62/us-central1/api/payments/create-2023-07-31T00:07:12.180Z"],"workRunningCount":1}
[debug] [2023-07-31T00:07:13.007Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 822.235382ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 822.235382ms"}}
[debug] [2023-07-31T00:07:13.008Z] [worker-us-central1-api-1372b8b0-7220-4fd3-aecb-a480889823c0]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1372b8b0-7220-4fd3-aecb-a480889823c0]: IDLE"}}
[debug] [2023-07-31T00:07:13.009Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-07-31T00:07:13.009Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-07-31T00:07:13.009Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
